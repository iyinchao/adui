function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

import React, { forwardRef, useEffect, useImperativeHandle, useRef } from "react";
import * as ReactDOM from "react-dom";
import PropTypes from "prop-types";
import classNames from "classnames";
import Button from "../button";
import "./style";
var prefix = "adui-channels-message";
var INTENTS = ["normal", "primary", "success", "warning", "danger"];
var Message = forwardRef(function (_ref, ref) {
  var action = _ref.action,
      className = _ref.className,
      closable = _ref.closable,
      content = _ref.content,
      duration = _ref.duration,
      getContainer = _ref.getContainer,
      intent = _ref.intent,
      onClose = _ref.onClose,
      otherProps = _objectWithoutProperties(_ref, ["action", "className", "closable", "content", "duration", "getContainer", "intent", "onClose"]);

  var messageRef = useRef(null);
  var icon = React.createElement("svg", {
    className: "".concat(prefix, "-icon"),
    width: "20",
    height: "20",
    viewBox: "0 0 20 20",
    fill: "none"
  }, React.createElement("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M1.66663 10C1.66663 14.6024 5.39759 18.3333 9.99996 18.3333C14.6023 18.3333 18.3333 14.6024 18.3333 10C18.3333 5.39763 14.6023 1.66667 9.99996 1.66667C5.39759 1.66667 1.66663 5.39763 1.66663 10ZM13.6856 7.11667L9.01949 11.7828L6.71457 9.47785L5.83329 10.3591L8.31438 12.842C8.70481 13.2327 9.33806 13.2329 9.72871 12.8424L14.571 8.00211L13.6856 7.11667Z",
    fill: "#07C160",
    fillOpacity: "0.9"
  }));

  switch (intent) {
    case "normal":
      icon = React.createElement("svg", {
        className: "".concat(prefix, "-icon"),
        width: "20",
        height: "20",
        viewBox: "0 0 20 20",
        fill: "none"
      }, React.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M9.99996 18.3333C5.39759 18.3333 1.66663 14.6024 1.66663 10C1.66663 5.39762 5.39759 1.66666 9.99996 1.66666C14.6023 1.66666 18.3333 5.39762 18.3333 10C18.3333 14.6024 14.6023 18.3333 9.99996 18.3333ZM10.625 8.33333V14.1667H9.37496V8.33333H10.625ZM9.99996 7.5C10.4602 7.5 10.8333 7.1269 10.8333 6.66666C10.8333 6.20643 10.4602 5.83333 9.99996 5.83333C9.53972 5.83333 9.16663 6.20643 9.16663 6.66666C9.16663 7.1269 9.53972 7.5 9.99996 7.5Z",
        fill: "#10AEFF"
      }));
      break;

    case "warning":
      icon = React.createElement("svg", {
        className: "".concat(prefix, "-icon"),
        width: "20",
        height: "20",
        viewBox: "0 0 20 20",
        fill: "none"
      }, React.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M18.3005 16.0439C18.6855 16.7105 18.2044 17.5439 17.4346 17.5439L2.5653 17.5452C1.79551 17.5452 1.31431 16.712 1.69913 16.0453L9.13254 3.16683C9.51738 2.5001 10.4797 2.50002 10.8646 3.16667L18.3005 16.0439ZM9.37253 7.9541H10.6274L10.5298 12.6758H9.47019L9.37253 7.9541ZM9.28952 14.4043C9.28952 14.79 9.60202 15.0977 9.99753 15.0977C10.3979 15.0977 10.7104 14.79 10.7104 14.4043C10.7104 14.0185 10.3979 13.7158 9.99753 13.7158C9.60202 13.7158 9.28952 14.0185 9.28952 14.4043Z",
        fill: "#FA9D3B"
      }));
      break;

    case "danger":
      icon = React.createElement("svg", {
        className: "".concat(prefix, "-icon"),
        width: "20",
        height: "20",
        viewBox: "0 0 20 20",
        fill: "none"
      }, React.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M9.99996 18.3333C5.39759 18.3333 1.66663 14.6024 1.66663 10C1.66663 5.39763 5.39759 1.66667 9.99996 1.66667C14.6023 1.66667 18.3333 5.39763 18.3333 10C18.3333 14.6024 14.6023 18.3333 9.99996 18.3333ZM9.36389 5.11312H10.6342L10.5431 11.4437H9.45504L9.36389 5.11312ZM9.24996 13.5173C9.24996 13.9331 9.58036 14.2521 9.99622 14.2521C10.4235 14.2521 10.7482 13.9331 10.7482 13.5173C10.7482 13.1014 10.4235 12.7824 9.99622 12.7824C9.58036 12.7824 9.24996 13.1014 9.24996 13.5173Z",
        fill: "#FA5151"
      }));
      break;

    default:
      break;
  }

  var timer;

  var clearCloseTimer = function clearCloseTimer() {
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
  };

  var close = function close() {
    if (messageRef && messageRef.current) {
      messageRef.current.style.opacity = "0";
      messageRef.current.style.visibility = "hidden";
      messageRef.current.style.filter = "blur(4px)";
    }

    clearCloseTimer();

    if (onClose) {
      onClose();
    }
  };

  var setCloseTimer = function setCloseTimer() {
    if (duration) {
      timer = setTimeout(function () {
        close();
      }, duration * 1000);
    }
  };

  useEffect(function () {
    setCloseTimer();
    return clearCloseTimer;
  }, []);
  useImperativeHandle(ref, function () {
    return {
      close: close,
      getDomNode: function getDomNode() {
        return messageRef.current;
      }
    };
  });
  var hasActions = action || closable;
  return React.createElement("div", _extends({
    className: classNames(className, "".concat(prefix, "-base"), "".concat(prefix, "-").concat(intent), _defineProperty({}, "".concat(prefix, "-hasActions"), hasActions)),
    onMouseEnter: clearCloseTimer,
    onMouseLeave: setCloseTimer,
    ref: messageRef,
    "data-duration": duration
  }, otherProps), icon, React.createElement("div", {
    className: "".concat(prefix, "-content")
  }, content), hasActions && React.createElement("div", {
    className: "".concat(prefix, "-actions")
  }, action && React.createElement("div", {
    className: "".concat(prefix, "-action")
  }, React.createElement(Button, {
    theme: "light",
    onClick: function onClick() {
      var onClick = action.onClick;

      if (onClick) {
        onClick();
      }
    }
  }, action.text)), closable && React.createElement(Button, {
    leftIcon: "cancel",
    theme: "light",
    onClick: close
  })));
});
Message.displayName = "Message";
Message.propTypes = {
  action: PropTypes.any,
  className: PropTypes.string,
  closable: PropTypes.bool,
  content: PropTypes.node,
  duration: PropTypes.number,
  getContainer: PropTypes.func,
  intent: PropTypes.any,
  onClose: PropTypes.func
};
Message.defaultProps = {
  action: null,
  className: undefined,
  closable: false,
  content: null,
  duration: 2,
  getContainer: undefined,
  intent: "normal",
  onClose: null
};

var newInstance = function newInstance(props) {
  var instances = Array.from(document.getElementsByClassName("".concat(prefix, "-wrapper")));
  instances = instances.filter(function (o) {
    return o.dataset.close !== "true";
  });

  if (instances && instances.length > 2) {
    var firstInstance = instances[0];
    var firstChild = firstInstance.children[0];

    if (firstChild.dataset.duration !== "0") {
      firstInstance.dataset.close = "true";
      firstChild.style.opacity = "0";
      firstChild.style.visibility = "hidden";
      firstChild.style.filter = "blur(4px)";
    }
  }

  var instance;

  var onClose = props.onClose,
      getContainer = props.getContainer,
      otherProps = _objectWithoutProperties(props, ["onClose", "getContainer"]);

  var container = document.createElement("div");
  container.className = "".concat(prefix, "-wrapper");

  if (getContainer) {
    getContainer().appendChild(container);
  } else {
    document.body.appendChild(container);
  }

  var updateStyles = function updateStyles() {
    setTimeout(function () {
      var messages = document.getElementsByClassName("".concat(prefix, "-wrapper"));
      Array.prototype.forEach.call(messages, function (message, index) {
        message.style.opacity = "1";
        message.style.transform = "\n          translate3d(var(--message-offset-x),\n          calc(".concat(56 * (messages.length - 1 - index), "px + var(--message-offset-y)), 0)");
      });
    }, 50);
  };

  updateStyles();

  var close = function close() {
    if (onClose) {
      onClose();
    }

    setTimeout(function () {
      var unmountResult = ReactDOM.unmountComponentAtNode(container);

      if (unmountResult && container.parentNode) {
        container.parentNode.removeChild(container);
        updateStyles();
      }
    }, 300);
  };

  ReactDOM.render(React.createElement(Message, _extends({
    ref: function ref(message) {
      instance = message;
    },
    onClose: close
  }, otherProps)), container);
  return {
    destroy: function destroy() {
      if (instance) {
        instance.close();
      }
    }
  };
};

INTENTS.forEach(function (intent) {
  Message[intent] = function (config) {
    var cnfg = {
      intent: intent
    };

    if (typeof config === "string") {
      cnfg = {
        content: config,
        intent: intent
      };
    } else {
      cnfg = config;
    }

    return newInstance(_objectSpread(_objectSpread({}, cnfg), {}, {
      intent: intent
    }));
  };
});
export default Message;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2NvbXBvbmVudHMvY2hhbm5lbHMtbWVzc2FnZS9NZXNzYWdlLnRzeCJdLCJuYW1lcyI6WyJSZWFjdCIsImZvcndhcmRSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwidXNlUmVmIiwiUmVhY3RET00iLCJQcm9wVHlwZXMiLCJjbGFzc05hbWVzIiwiQnV0dG9uIiwicHJlZml4IiwiSU5URU5UUyIsIk1lc3NhZ2UiLCJyZWYiLCJhY3Rpb24iLCJjbGFzc05hbWUiLCJjbG9zYWJsZSIsImNvbnRlbnQiLCJkdXJhdGlvbiIsImdldENvbnRhaW5lciIsImludGVudCIsIm9uQ2xvc2UiLCJvdGhlclByb3BzIiwibWVzc2FnZVJlZiIsImljb24iLCJ0aW1lciIsImNsZWFyQ2xvc2VUaW1lciIsImNsZWFyVGltZW91dCIsImNsb3NlIiwiY3VycmVudCIsInN0eWxlIiwib3BhY2l0eSIsInZpc2liaWxpdHkiLCJmaWx0ZXIiLCJzZXRDbG9zZVRpbWVyIiwic2V0VGltZW91dCIsImdldERvbU5vZGUiLCJoYXNBY3Rpb25zIiwib25DbGljayIsInRleHQiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsImFueSIsInN0cmluZyIsImJvb2wiLCJub2RlIiwibnVtYmVyIiwiZnVuYyIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsIm5ld0luc3RhbmNlIiwicHJvcHMiLCJpbnN0YW5jZXMiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvIiwiZGF0YXNldCIsImxlbmd0aCIsImZpcnN0SW5zdGFuY2UiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW4iLCJpbnN0YW5jZSIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJ1cGRhdGVTdHlsZXMiLCJtZXNzYWdlcyIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwibWVzc2FnZSIsImluZGV4IiwidHJhbnNmb3JtIiwidW5tb3VudFJlc3VsdCIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW5kZXIiLCJkZXN0cm95IiwiY29uZmlnIiwiY25mZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ0EsT0FBT0EsS0FBUCxJQUNFQyxVQURGLEVBRUVDLFNBRkYsRUFHRUMsbUJBSEYsRUFJRUMsTUFKRixRQUtPLE9BTFA7QUFNQSxPQUFPLEtBQUtDLFFBQVosTUFBMEIsV0FBMUI7QUFDQSxPQUFPQyxTQUFQLE1BQXNCLFlBQXRCO0FBQ0EsT0FBT0MsVUFBUCxNQUF1QixZQUF2QjtBQUNBLE9BQU9DLE1BQVAsTUFBbUIsV0FBbkI7QUFDQSxPQUFPLFNBQVA7QUFFQSxJQUFNQyxNQUFNLEdBQUcsdUJBQWY7QUFDQSxJQUFNQyxPQUFPLEdBQUcsQ0FBQyxRQUFELEVBQVcsU0FBWCxFQUFzQixTQUF0QixFQUFpQyxTQUFqQyxFQUE0QyxRQUE1QyxDQUFoQjtBQXFEQSxJQUFNQyxPQUFpQixHQUFHVixVQUFVLENBQ2xDLGdCQVlFVyxHQVpGLEVBYUs7QUFBQSxNQVhEQyxNQVdDLFFBWERBLE1BV0M7QUFBQSxNQVZEQyxTQVVDLFFBVkRBLFNBVUM7QUFBQSxNQVREQyxRQVNDLFFBVERBLFFBU0M7QUFBQSxNQVJEQyxPQVFDLFFBUkRBLE9BUUM7QUFBQSxNQVBEQyxRQU9DLFFBUERBLFFBT0M7QUFBQSxNQU5EQyxZQU1DLFFBTkRBLFlBTUM7QUFBQSxNQUxEQyxNQUtDLFFBTERBLE1BS0M7QUFBQSxNQUpEQyxPQUlDLFFBSkRBLE9BSUM7QUFBQSxNQUhFQyxVQUdGOztBQUNILE1BQU1DLFVBQVUsR0FBR2xCLE1BQU0sQ0FBaUIsSUFBakIsQ0FBekI7QUFFQSxNQUFJbUIsSUFBSSxHQUNOO0FBQ0UsSUFBQSxTQUFTLFlBQUtkLE1BQUwsVUFEWDtBQUVFLElBQUEsS0FBSyxFQUFDLElBRlI7QUFHRSxJQUFBLE1BQU0sRUFBQyxJQUhUO0FBSUUsSUFBQSxPQUFPLEVB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QUQ7QUFDRSxJQUFBLEdBQUcsRUFBRSxhQUFDUCxPQUFELEVBQWE7QUFDaEJWLE1BQUFBLFFBQVEsR0FBR1UsT0FBWDtBQUNELEtBSEg7QUFJRSxJQUFBLE9BQU8sRUFBRTdDO0FBSlgsS0FLTU4sVUFMTixFQURGLEVBUUUwQyxTQVJGO0FBV0EsU0FBTztBQUNMaUIsSUFBQUEsT0FBTyxFQUFFLG1CQUFNO0FBQ2IsVUFBSWxCLFFBQUosRUFBYztBQUNaQSxRQUFBQSxRQUFRLENBQUNuQyxLQUFUO0FBQ0Q7QUFDRjtBQUxJLEdBQVA7QUFPRCxDQS9FRDs7QUFpRkFqQixPQUFPLENBQUM0RCxPQUFSLENBQ0UsVUFBQ25ELE1BQUQsRUFBcUU7QUFDbkVSLEVBQUFBLE9BQU8sQ0FBQ1EsTUFBRCxDQUFQLEdBQWtCLFVBQUM4RCxNQUFELEVBQW9DO0FBQ3BELFFBQUlDLElBQUksR0FBRztBQUFFL0QsTUFBQUEsTUFBTSxFQUFOQTtBQUFGLEtBQVg7O0FBQ0EsUUFBSSxPQUFPOEQsTUFBUCxLQUFrQixRQUF0QixFQUFnQztBQUM5QkMsTUFBQUEsSUFBSSxHQUFHO0FBQUVsRSxRQUFBQSxPQUFPLEVBQUVpRSxNQUFYO0FBQW1COUQsUUFBQUEsTUFBTSxFQUFOQTtBQUFuQixPQUFQO0FBQ0QsS0FGRCxNQUVPO0FBQ0wrRCxNQUFBQSxJQUFJLEdBQUdELE1BQVA7QUFDRDs7QUFDRCxXQUFPaEMsV0FBVyxpQ0FDYmlDLElBRGE7QUFFaEIvRCxNQUFBQSxNQUFNLEVBQU5BO0FBRmdCLE9BQWxCO0FBSUQsR0FYRDtBQVlELENBZEg7QUFpQkEsZUFBZVIsT0FBZiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbmltcG9ydCBSZWFjdCwge1xuICBmb3J3YXJkUmVmLFxuICB1c2VFZmZlY3QsXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUsXG4gIHVzZVJlZixcbn0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIlxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiXG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiXG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi9idXR0b25cIlxuaW1wb3J0IFwiLi9zdHlsZVwiXG5cbmNvbnN0IHByZWZpeCA9IFwiYWR1aS1jaGFubmVscy1tZXNzYWdlXCJcbmNvbnN0IElOVEVOVFMgPSBbXCJub3JtYWxcIiwgXCJwcmltYXJ5XCIsIFwic3VjY2Vzc1wiLCBcIndhcm5pbmdcIiwgXCJkYW5nZXJcIl1cblxuZXhwb3J0IGludGVyZmFjZSBJTWVzc2FnZVByb3BzIHtcbiAgW2tleTogc3RyaW5nXTogYW55XG4gIC8qKlxuICAgKiDooYzliqjmjInpkq7nmoTphY3nva7vvIzlpoLvvJphY3Rpb246IHsgdGV4dDogXCLop6PplIFcIiwgb25DbGljazogKCkgPT4geyBtZXNzYWdlLmRlc3Ryb3koKSB9IH1cbiAgICovXG4gIGFjdGlvbj86IHsgdGV4dDogc3RyaW5nOyBvbkNsaWNrOiAoKSA9PiB2b2lkIH0gfCBudWxsXG4gIC8qKlxuICAgKiDpmYTliqDnsbvlkI1cbiAgICovXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xuICAvKipcbiAgICog5piv5ZCm5pi+56S65YWz6ZetIEljb27vvIzlpoLmnpzpnIDopoHlj6rmlK/mjIHmiYvliqjlhbPpl63vvIzov5jpnIDopoHkvKDlhaUgZHVyYXRpb246IDBcbiAgICovXG4gIGNsb3NhYmxlPzogYm9vbGVhblxuICAvKipcbiAgICog5YaF5a65XG4gICAqL1xuICBjb250ZW50PzogUmVhY3QuUmVhY3ROb2RlXG4gIC8qKlxuICAgKiBcYumXtOmalOWkmuS5heiHquWKqOWFs+mXre+8jOWNleS9jeS4uiBz77yM5aaC5p6c5Lyg5YWlIDDvvIzliJnooajnpLrkuI3kvJroh6rliqjmtojlpLFcbiAgICovXG4gIGR1cmF0aW9uPzogbnVtYmVyXG4gIC8qKlxuICAgKiBcYk1lc3NhZ2Ug5o+S5YWl5Yiw5ZOq5Liq5YWD57Sg77yM6buY6K6kICgpID0+IGRvY3VtZW50LmJvZHlcbiAgICovXG4gIGdldENvbnRhaW5lcj86ICgpID0+IEhUTUxFbGVtZW50XG4gIC8qKlxuICAgKiDorr7nva7nsbvlnotcbiAgICovXG4gIGludGVudDogXCJub3JtYWxcIiB8IFwicHJpbWFyeVwiIHwgXCJzdWNjZXNzXCIgfCBcIndhcm5pbmdcIiB8IFwiZGFuZ2VyXCJcbiAgLyoqXG4gICAqIOWFs+mXreaXtueahCBoYW5kbGVyXG4gICAqL1xuICBvbkNsb3NlPzogKCgpID0+IHZvaWQpIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNZXNzYWdlXG4gIGV4dGVuZHMgUmVhY3QuRm9yd2FyZFJlZkV4b3RpY0NvbXBvbmVudDxcbiAgICBJTWVzc2FnZVByb3BzICYgUmVhY3QuUmVmQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD5cbiAgPiB7XG4gIG5vcm1hbDogYW55XG4gIHByaW1hcnk6IGFueVxuICBzdWNjZXNzOiBhbnlcbiAgd2FybmluZzogYW55XG4gIGRhbmdlcjogYW55XG59XG5cbi8qKlxuICog5YWo5bGA5o+Q6YaS55So5LqO5YWo5bGA5oCn5Zyw5bGV56S66ZyA6KaB5Y2z5pe25oCn5YWz5rOo55qE5L+h5oGv44CCXG4gKi9cbi8vIEB0cy1pZ25vcmVcbmNvbnN0IE1lc3NhZ2U6IElNZXNzYWdlID0gZm9yd2FyZFJlZihcbiAgKFxuICAgIHtcbiAgICAgIGFjdGlvbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNsb3NhYmxlLFxuICAgICAgY29udGVudCxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgZ2V0Q29udGFpbmVyLFxuICAgICAgaW50ZW50LFxuICAgICAgb25DbG9zZSxcbiAgICAgIC4uLm90aGVyUHJvcHNcbiAgICB9OiBJTWVzc2FnZVByb3BzLFxuICAgIHJlZjogYW55XG4gICkgPT4ge1xuICAgIGNvbnN0IG1lc3NhZ2VSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgICBsZXQgaWNvbiA9IChcbiAgICAgIDxzdmdcbiAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWljb25gfVxuICAgICAgICB3aWR0aD1cIjIwXCJcbiAgICAgICAgaGVpZ2h0PVwiMjBcIlxuICAgICAgICB2aWV3Qm94PVwiMCAwIDIwIDIwXCJcbiAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgIGZpbGxSdWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgY2xpcFJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICBkPVwiTTEuNjY2NjMgMTBDMS42NjY2MyAxNC42MDI0IDUuMzk3NTkgMTguMzMzMyA5Ljk5OTk2IDE4LjMzMzNDMTQuNjAyMyAxOC4zMzMzIDE4LjMzMzMgMTQuNjAyNCAxOC4zMzMzIDEwQzE4LjMzMzMgNS4zOTc2MyAxNC42MDIzIDEuNjY2NjcgOS45OTk5NiAxLjY2NjY3QzUuMzk3NTkgMS42NjY2NyAxLjY2NjYzIDUuMzk3NjMgMS42NjY2MyAxMFpNMTMuNjg1NiA3LjExNjY3TDkuMDE5NDkgMTEuNzgyOEw2LjcxNDU3IDkuNDc3ODVMNS44MzMyOSAxMC4zNTkxTDguMzE0MzggMTIuODQyQzguNzA0ODEgMTMuMjMyNyA5LjMzODA2IDEzLjIzMjkgOS43Mjg3MSAxMi44NDI0TDE0LjU3MSA4LjAwMjExTDEzLjY4NTYgNy4xMTY2N1pcIlxuICAgICAgICAgIGZpbGw9XCIjMDdDMTYwXCJcbiAgICAgICAgICBmaWxsT3BhY2l0eT1cIjAuOVwiXG4gICAgICAgIC8+XG4gICAgICA8L3N2Zz5cbiAgICApXG5cbiAgICBzd2l0Y2ggKGludGVudCkge1xuICAgICAgY2FzZSBcIm5vcm1hbFwiOlxuICAgICAgICBpY29uID0gKFxuICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4fS1pY29uYH1cbiAgICAgICAgICAgIHdpZHRoPVwiMjBcIlxuICAgICAgICAgICAgaGVpZ2h0PVwiMjBcIlxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgZmlsbFJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgY2xpcFJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgZD1cIk05Ljk5OTk2IDE4LjMzMzNDNS4zOTc1OSAxOC4zMzMzIDEuNjY2NjMgMTQuNjAyNCAxLjY2NjYzIDEwQzEuNjY2NjMgNS4zOTc2MiA1LjM5NzU5IDEuNjY2NjYgOS45OTk5NiAxLjY2NjY2QzE0LjYwMjMgMS42NjY2NiAxOC4zMzMzIDUuMzk3NjIgMTguMzMzMyAxMEMxOC4zMzMzIDE0LjYwMjQgMTQuNjAyMyAxOC4zMzMzIDkuOTk5OTYgMTguMzMzM1pNMTAuNjI1IDguMzMzMzNWMTQuMTY2N0g5LjM3NDk2VjguMzMzMzNIMTAuNjI1Wk05Ljk5OTk2IDcuNUMxMC40NjAyIDcuNSAxMC44MzMzIDcuMTI2OSAxMC44MzMzIDYuNjY2NjZDMTAuODMzMyA2LjIwNjQzIDEwLjQ2MDIgNS44MzMzMyA5Ljk5OTk2IDUuODMzMzNDOS41Mzk3MiA1LjgzMzMzIDkuMTY2NjMgNi4yMDY0MyA5LjE2NjYzIDYuNjY2NjZDOS4xNjY2MyA3LjEyNjkgOS41Mzk3MiA3LjUgOS45OTk5NiA3LjVaXCJcbiAgICAgICAgICAgICAgZmlsbD1cIiMxMEFFRkZcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBcIndhcm5pbmdcIjpcbiAgICAgICAgaWNvbiA9IChcbiAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeH0taWNvbmB9XG4gICAgICAgICAgICB3aWR0aD1cIjIwXCJcbiAgICAgICAgICAgIGhlaWdodD1cIjIwXCJcbiAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjAgMjBcIlxuICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgIGZpbGxSdWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgICAgIGNsaXBSdWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgICAgIGQ9XCJNMTguMzAwNSAxNi4wNDM5QzE4LjY4NTUgMTYuNzEwNSAxOC4yMDQ0IDE3LjU0MzkgMTcuNDM0NiAxNy41NDM5TDIuNTY1MyAxNy41NDUyQzEuNzk1NTEgMTcuNTQ1MiAxLjMxNDMxIDE2LjcxMiAxLjY5OTEzIDE2LjA0NTNMOS4xMzI1NCAzLjE2NjgzQzkuNTE3MzggMi41MDAxIDEwLjQ3OTcgMi41MDAwMiAxMC44NjQ2IDMuMTY2NjdMMTguMzAwNSAxNi4wNDM5Wk05LjM3MjUzIDcuOTU0MUgxMC42Mjc0TDEwLjUyOTggMTIuNjc1OEg5LjQ3MDE5TDkuMzcyNTMgNy45NTQxWk05LjI4OTUyIDE0LjQwNDNDOS4yODk1MiAxNC43OSA5LjYwMjAyIDE1LjA5NzcgOS45OTc1MyAxNS4wOTc3QzEwLjM5NzkgMTUuMDk3NyAxMC43MTA0IDE0Ljc5IDEwLjcxMDQgMTQuNDA0M0MxMC43MTA0IDE0LjAxODUgMTAuMzk3OSAxMy43MTU4IDkuOTk3NTMgMTMuNzE1OEM5LjYwMjAyIDEzLjcxNTggOS4yODk1MiAxNC4wMTg1IDkuMjg5NTIgMTQuNDA0M1pcIlxuICAgICAgICAgICAgICBmaWxsPVwiI0ZBOUQzQlwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFwiZGFuZ2VyXCI6XG4gICAgICAgIGljb24gPSAoXG4gICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWljb25gfVxuICAgICAgICAgICAgd2lkdGg9XCIyMFwiXG4gICAgICAgICAgICBoZWlnaHQ9XCIyMFwiXG4gICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDIwIDIwXCJcbiAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICBmaWxsUnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICBjbGlwUnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICBkPVwiTTkuOTk5OTYgMTguMzMzM0M1LjM5NzU5IDE4LjMzMzMgMS42NjY2MyAxNC42MDI0IDEuNjY2NjMgMTBDMS42NjY2MyA1LjM5NzYzIDUuMzk3NTkgMS42NjY2NyA5Ljk5OTk2IDEuNjY2NjdDMTQuNjAyMyAxLjY2NjY3IDE4LjMzMzMgNS4zOTc2MyAxOC4zMzMzIDEwQzE4LjMzMzMgMTQuNjAyNCAxNC42MDIzIDE4LjMzMzMgOS45OTk5NiAxOC4zMzMzWk05LjM2Mzg5IDUuMTEzMTJIMTAuNjM0MkwxMC41NDMxIDExLjQ0MzdIOS40NTUwNEw5LjM2Mzg5IDUuMTEzMTJaTTkuMjQ5OTYgMTMuNTE3M0M5LjI0OTk2IDEzLjkzMzEgOS41ODAzNiAxNC4yNTIxIDkuOTk2MjIgMTQuMjUyMUMxMC40MjM1IDE0LjI1MjEgMTAuNzQ4MiAxMy45MzMxIDEwLjc0ODIgMTMuNTE3M0MxMC43NDgyIDEzLjEwMTQgMTAuNDIzNSAxMi43ODI0IDkuOTk2MjIgMTIuNzgyNEM5LjU4MDM2IDEyLjc4MjQgOS4yNDk5NiAxMy4xMDE0IDkuMjQ5OTYgMTMuNTE3M1pcIlxuICAgICAgICAgICAgICBmaWxsPVwiI0ZBNTE1MVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGxldCB0aW1lcjogbnVsbCB8IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+XG5cbiAgICBjb25zdCBjbGVhckNsb3NlVGltZXIgPSAoKSA9PiB7XG4gICAgICBpZiAodGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgICB0aW1lciA9IG51bGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICAgIGlmIChtZXNzYWdlUmVmICYmIG1lc3NhZ2VSZWYuY3VycmVudCkge1xuICAgICAgICBtZXNzYWdlUmVmLmN1cnJlbnQuc3R5bGUub3BhY2l0eSA9IFwiMFwiXG4gICAgICAgIG1lc3NhZ2VSZWYuY3VycmVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIlxuICAgICAgICBtZXNzYWdlUmVmLmN1cnJlbnQuc3R5bGUuZmlsdGVyID0gXCJibHVyKDRweClcIlxuICAgICAgfVxuICAgICAgY2xlYXJDbG9zZVRpbWVyKClcbiAgICAgIGlmIChvbkNsb3NlKSB7XG4gICAgICAgIG9uQ2xvc2UoKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNldENsb3NlVGltZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoZHVyYXRpb24pIHtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjbG9zZSgpXG4gICAgICAgIH0sIGR1cmF0aW9uICogMTAwMClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgc2V0Q2xvc2VUaW1lcigpXG4gICAgICByZXR1cm4gY2xlYXJDbG9zZVRpbWVyXG4gICAgfSwgW10pXG5cbiAgICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHtcbiAgICAgIGNsb3NlLFxuICAgICAgZ2V0RG9tTm9kZTogKCkgPT4gbWVzc2FnZVJlZi5jdXJyZW50LFxuICAgIH0pKVxuXG4gICAgY29uc3QgaGFzQWN0aW9ucyA9IGFjdGlvbiB8fCBjbG9zYWJsZVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICBgJHtwcmVmaXh9LWJhc2VgLFxuICAgICAgICAgIGAke3ByZWZpeH0tJHtpbnRlbnR9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBbYCR7cHJlZml4fS1oYXNBY3Rpb25zYF06IGhhc0FjdGlvbnMsXG4gICAgICAgICAgfVxuICAgICAgICApfVxuICAgICAgICBvbk1vdXNlRW50ZXI9e2NsZWFyQ2xvc2VUaW1lcn1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXtzZXRDbG9zZVRpbWVyfVxuICAgICAgICByZWY9e21lc3NhZ2VSZWZ9XG4gICAgICAgIGRhdGEtZHVyYXRpb249e2R1cmF0aW9ufVxuICAgICAgICB7Li4ub3RoZXJQcm9wc31cbiAgICAgID5cbiAgICAgICAge2ljb259XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWNvbnRlbnRgfT57Y29udGVudH08L2Rpdj5cbiAgICAgICAge2hhc0FjdGlvbnMgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWFjdGlvbnNgfT5cbiAgICAgICAgICAgIHthY3Rpb24gJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1hY3Rpb25gfT5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB0aGVtZT1cImxpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvbkNsaWNrIH0gPSBhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7YWN0aW9uLnRleHR9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtjbG9zYWJsZSAmJiAoXG4gICAgICAgICAgICAgIDxCdXR0b24gbGVmdEljb249XCJjYW5jZWxcIiB0aGVtZT1cImxpZ2h0XCIgb25DbGljaz17Y2xvc2V9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG4pXG5cbk1lc3NhZ2UuZGlzcGxheU5hbWUgPSBcIk1lc3NhZ2VcIlxuXG5NZXNzYWdlLnByb3BUeXBlcyA9IHtcbiAgLyoqXG4gICAqIOihjOWKqOaMiemSrueahOmFjee9ru+8jOWmgu+8mmFjdGlvbjogeyB0ZXh0OiBcIuino+mUgVwiLCBvbkNsaWNrOiAoKSA9PiB7IG1lc3NhZ2UuZGVzdHJveSgpIH0gfVxuICAgKi9cbiAgYWN0aW9uOiBQcm9wVHlwZXMuYW55LFxuICAvKipcbiAgICog6ZmE5Yqg57G75ZCNXG4gICAqL1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIC8qKlxuICAgKiDmmK/lkKbmmL7npLrlhbPpl60gSWNvbu+8jOWmguaenOmcgOimgeWPquaUr+aMgeaJi+WKqOWFs+mXre+8jOi/mOmcgOimgeS8oOWFpSBkdXJhdGlvbjogMFxuICAgKi9cbiAgY2xvc2FibGU6IFByb3BUeXBlcy5ib29sLFxuICAvKipcbiAgICog5YaF5a65XG4gICAqL1xuICBjb250ZW50OiBQcm9wVHlwZXMubm9kZSxcbiAgLyoqXG4gICAqIFxi6Ze06ZqU5aSa5LmF6Ieq5Yqo5YWz6Zet77yM5Y2V5L2N5Li6IHPvvIzlpoLmnpzkvKDlhaUgMO+8jOWImeihqOekuuS4jeS8muiHquWKqOa2iOWksVxuICAgKi9cbiAgZHVyYXRpb246IFByb3BUeXBlcy5udW1iZXIsXG4gIC8qKlxuICAgKiBcYk1lc3NhZ2Ug5o+S5YWl5Yiw5ZOq5Liq5YWD57Sg77yM6buY6K6kICgpID0+IGRvY3VtZW50LmJvZHlcbiAgICovXG4gIGdldENvbnRhaW5lcjogUHJvcFR5cGVzLmZ1bmMsXG4gIC8qKlxuICAgKiDorr7nva7nsbvlnotcbiAgICovXG4gIGludGVudDogUHJvcFR5cGVzLmFueSxcbiAgLyoqXG4gICAqIOWFs+mXreaXtueahCBoYW5kbGVyXG4gICAqL1xuICBvbkNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcbn1cblxuTWVzc2FnZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGFjdGlvbjogbnVsbCxcbiAgY2xhc3NOYW1lOiB1bmRlZmluZWQsXG4gIGNsb3NhYmxlOiBmYWxzZSxcbiAgY29udGVudDogbnVsbCxcbiAgZHVyYXRpb246IDIsXG4gIGdldENvbnRhaW5lcjogdW5kZWZpbmVkLFxuICBpbnRlbnQ6IFwibm9ybWFsXCIsXG4gIG9uQ2xvc2U6IG51bGwsXG59XG5cbmNvbnN0IG5ld0luc3RhbmNlID0gKHByb3BzOiBJTWVzc2FnZVByb3BzKSA9PiB7XG4gIGxldCBpbnN0YW5jZXMgPSBBcnJheS5mcm9tKFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYCR7cHJlZml4fS13cmFwcGVyYClcbiAgKVxuICBpbnN0YW5jZXMgPSBpbnN0YW5jZXMuZmlsdGVyKFxuICAgIChvOiBIVE1MRGl2RWxlbWVudCkgPT4gby5kYXRhc2V0LmNsb3NlICE9PSBcInRydWVcIlxuICApXG4gIGlmIChpbnN0YW5jZXMgJiYgaW5zdGFuY2VzLmxlbmd0aCA+IDIpIHtcbiAgICBjb25zdCBmaXJzdEluc3RhbmNlID0gaW5zdGFuY2VzWzBdIGFzIEhUTUxFbGVtZW50XG4gICAgY29uc3QgZmlyc3RDaGlsZCA9IGZpcnN0SW5zdGFuY2UuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnRcbiAgICBpZiAoZmlyc3RDaGlsZC5kYXRhc2V0LmR1cmF0aW9uICE9PSBcIjBcIikge1xuICAgICAgZmlyc3RJbnN0YW5jZS5kYXRhc2V0LmNsb3NlID0gXCJ0cnVlXCJcbiAgICAgIGZpcnN0Q2hpbGQuc3R5bGUub3BhY2l0eSA9IFwiMFwiXG4gICAgICBmaXJzdENoaWxkLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiXG4gICAgICBmaXJzdENoaWxkLnN0eWxlLmZpbHRlciA9IFwiYmx1cig0cHgpXCJcbiAgICB9XG4gIH1cblxuICBsZXQgaW5zdGFuY2U6IGFueVxuXG4gIGNvbnN0IHsgb25DbG9zZSwgZ2V0Q29udGFpbmVyLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wc1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gIGNvbnRhaW5lci5jbGFzc05hbWUgPSBgJHtwcmVmaXh9LXdyYXBwZXJgXG4gIGlmIChnZXRDb250YWluZXIpIHtcbiAgICBnZXRDb250YWluZXIoKS5hcHBlbmRDaGlsZChjb250YWluZXIpXG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpXG4gIH1cblxuICBjb25zdCB1cGRhdGVTdHlsZXMgPSAoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYCR7cHJlZml4fS13cmFwcGVyYClcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoXG4gICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICAobWVzc2FnZTogSFRNTERpdkVsZW1lbnQsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBtZXNzYWdlLnN0eWxlLm9wYWNpdHkgPSBcIjFcIlxuICAgICAgICAgIG1lc3NhZ2Uuc3R5bGUudHJhbnNmb3JtID0gYFxuICAgICAgICAgIHRyYW5zbGF0ZTNkKHZhcigtLW1lc3NhZ2Utb2Zmc2V0LXgpLFxuICAgICAgICAgIGNhbGMoJHtcbiAgICAgICAgICAgIDU2ICogKG1lc3NhZ2VzLmxlbmd0aCAtIDEgLSBpbmRleClcbiAgICAgICAgICB9cHggKyB2YXIoLS1tZXNzYWdlLW9mZnNldC15KSksIDApYFxuICAgICAgICB9XG4gICAgICApXG4gICAgfSwgNTApXG4gIH1cblxuICB1cGRhdGVTdHlsZXMoKVxuXG4gIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgIGlmIChvbkNsb3NlKSB7XG4gICAgICBvbkNsb3NlKClcbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB1bm1vdW50UmVzdWx0ID0gUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZShjb250YWluZXIpXG4gICAgICBpZiAodW5tb3VudFJlc3VsdCAmJiBjb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgICBjb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb250YWluZXIpXG4gICAgICAgIHVwZGF0ZVN0eWxlcygpXG4gICAgICB9XG4gICAgfSwgMzAwKVxuICB9XG5cbiAgUmVhY3RET00ucmVuZGVyKFxuICAgIDxNZXNzYWdlXG4gICAgICByZWY9eyhtZXNzYWdlKSA9PiB7XG4gICAgICAgIGluc3RhbmNlID0gbWVzc2FnZVxuICAgICAgfX1cbiAgICAgIG9uQ2xvc2U9e2Nsb3NlfVxuICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgLz4sXG4gICAgY29udGFpbmVyXG4gIClcblxuICByZXR1cm4ge1xuICAgIGRlc3Ryb3k6ICgpID0+IHtcbiAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5jbG9zZSgpXG4gICAgICB9XG4gICAgfSxcbiAgfVxufVxuXG5JTlRFTlRTLmZvckVhY2goXG4gIChpbnRlbnQ6IFwibm9ybWFsXCIgfCBcInByaW1hcnlcIiB8IFwic3VjY2Vzc1wiIHwgXCJ3YXJuaW5nXCIgfCBcImRhbmdlclwiKSA9PiB7XG4gICAgTWVzc2FnZVtpbnRlbnRdID0gKGNvbmZpZzogSU1lc3NhZ2VQcm9wcyB8IHN0cmluZykgPT4ge1xuICAgICAgbGV0IGNuZmcgPSB7IGludGVudCB9IGFzIElNZXNzYWdlUHJvcHNcbiAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNuZmcgPSB7IGNvbnRlbnQ6IGNvbmZpZywgaW50ZW50IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNuZmcgPSBjb25maWdcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdJbnN0YW5jZSh7XG4gICAgICAgIC4uLmNuZmcsXG4gICAgICAgIGludGVudCxcbiAgICAgIH0pXG4gICAgfVxuICB9XG4pXG5cbmV4cG9ydCBkZWZhdWx0IE1lc3NhZ2VcbiJdfQ==