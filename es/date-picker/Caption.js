import * as React from "react";
import PropTypes from "prop-types";
import "./style";
import Icon from "../icon";
import { getDefaultMaxDate, getDefaultMinDate } from "./core";
var prefix = "adui-date";

var Caption = function Caption(_ref) {
  var date = _ref.date,
      maxDate = _ref.maxDate,
      minDate = _ref.minDate,
      onDateChange = _ref.onDateChange;

  var handleYearChange = function handleYearChange(e) {
    var newYear = parseInt(e.currentTarget.value, 10);
    var newDate = new Date(date.getTime());
    newDate.setFullYear(newYear);
    onDateChange(newDate, e);
  };

  var handleMonthChange = function handleMonthChange(e) {
    var newMonth = parseInt(e.currentTarget.value, 10);
    var newDate = new Date(date.getTime());
    newDate.setMonth(newMonth);
    onDateChange(newDate, e);
  };

  var minYear = minDate.getFullYear();
  var maxYear = maxDate.getFullYear();
  var years = [maxYear];

  for (var year = maxYear - 1; year >= minYear; year -= 1) {
    years.push(year);
  }

  var displayMonth = date.getMonth();
  var displayYear = date.getFullYear();
  var startMonth = displayYear === minYear ? minDate.getMonth() : 0;
  var endMonth = displayYear === maxYear ? maxDate.getMonth() + 1 : 12;
  var months = [startMonth];

  for (var month = startMonth + 1; month < endMonth; month += 1) {
    months.push(month);
  }

  return React.createElement("div", {
    className: "".concat(prefix, "-caption")
  }, React.createElement("div", {
    className: "".concat(prefix, "-selects")
  }, React.createElement("div", {
    className: "".concat(prefix, "-selectYear")
  }, React.createElement("select", {
    name: "year",
    onChange: handleYearChange,
    value: displayYear
  }, years.map(function (year) {
    return React.createElement("option", {
      key: year,
      value: year
    }, year, "\u5E74");
  })), React.createElement(Icon, {
    icon: "triangle-down"
  })), React.createElement("div", {
    className: "".concat(prefix, "-selectMonth")
  }, React.createElement("select", {
    name: "month",
    onChange: handleMonthChange,
    value: displayMonth
  }, months.map(function (month) {
    return React.createElement("option", {
      key: month,
      value: month
    }, month + 1, "\u6708");
  })), React.createElement(Icon, {
    icon: "triangle-down"
  }))));
};

Caption.propTypes = {
  date: PropTypes.any,
  maxDate: PropTypes.any,
  minDate: PropTypes.any,
  onDateChange: PropTypes.func.isRequired
};
Caption.defaultProps = {
  date: new Date(),
  maxDate: getDefaultMaxDate(),
  minDate: getDefaultMinDate()
};
export default Caption;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2NvbXBvbmVudHMvZGF0ZS1waWNrZXIvQ2FwdGlvbi50c3giXSwibmFtZXMiOlsiUmVhY3QiLCJQcm9wVHlwZXMiLCJJY29uIiwiZ2V0RGVmYXVsdE1heERhdGUiLCJnZXREZWZhdWx0TWluRGF0ZSIsInByZWZpeCIsIkNhcHRpb24iLCJkYXRlIiwibWF4RGF0ZSIsIm1pbkRhdGUiLCJvbkRhdGVDaGFuZ2UiLCJoYW5kbGVZZWFyQ2hhbmdlIiwiZSIsIm5ld1llYXIiLCJwYXJzZUludCIsImN1cnJlbnRUYXJnZXQiLCJ2YWx1ZSIsIm5ld0RhdGUiLCJEYXRlIiwiZ2V0VGltZSIsInNldEZ1bGxZZWFyIiwiaGFuZGxlTW9udGhDaGFuZ2UiLCJuZXdNb250aCIsInNldE1vbnRoIiwibWluWWVhciIsImdldEZ1bGxZZWFyIiwibWF4WWVhciIsInllYXJzIiwieWVhciIsInB1c2giLCJkaXNwbGF5TW9udGgiLCJnZXRNb250aCIsImRpc3BsYXlZZWFyIiwic3RhcnRNb250aCIsImVuZE1vbnRoIiwibW9udGhzIiwibW9udGgiLCJtYXAiLCJwcm9wVHlwZXMiLCJhbnkiLCJmdW5jIiwiaXNSZXF1aXJlZCIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLQSxLQUFaLE1BQXVCLE9BQXZCO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixZQUF0QjtBQUNBLE9BQU8sU0FBUDtBQUNBLE9BQU9DLElBQVAsTUFBaUIsU0FBakI7QUFDQSxTQUFTQyxpQkFBVCxFQUE0QkMsaUJBQTVCLFFBQXFELFFBQXJEO0FBRUEsSUFBTUMsTUFBTSxHQUFHLFdBQWY7O0FBYUEsSUFBTUMsT0FBZ0MsR0FBRyxTQUFuQ0EsT0FBbUMsT0FLcEI7QUFBQSxNQUpuQkMsSUFJbUIsUUFKbkJBLElBSW1CO0FBQUEsTUFIbkJDLE9BR21CLFFBSG5CQSxPQUdtQjtBQUFBLE1BRm5CQyxPQUVtQixRQUZuQkEsT0FFbUI7QUFBQSxNQURuQkMsWUFDbUIsUUFEbkJBLFlB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LElBQUEsS0FBSyxFQUFFUztBQUhULEtBS0dLLE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLFVBQUNELEtBQUQ7QUFBQSxXQUNWO0FBQVEsTUFBQSxHQUFHLEVBQUVBLEtBQWI7QUFBb0IsTUFBQSxLQUFLLEVBQUVBO0FBQTNCLE9BQ0dBLEtBQUssR0FBRyxDQURYLFdBRFU7QUFBQSxHQUFYLENBTEgsQ0FERixFQVlFLG9CQUFDLElBQUQ7QUFBTSxJQUFBLElBQUksRUFBQztBQUFYLElBWkYsQ0FYRixDQURGLENBREY7QUE4QkQsQ0FsRUQ7O0FBb0VBOUIsT0FBTyxDQUFDZ0MsU0FBUixHQUFvQjtBQUlsQi9CLEVBQUFBLElBQUksRUFBRU4sU0FBUyxDQUFDc0MsR0FKRTtBQVFsQi9CLEVBQUFBLE9BQU8sRUFBRVAsU0FBUyxDQUFDc0MsR0FSRDtBQVlsQjlCLEVBQUFBLE9BQU8sRUFBRVIsU0FBUyxDQUFDc0MsR0FaRDtBQWdCbEI3QixFQUFBQSxZQUFZLEVBQUVULFNBQVMsQ0FBQ3VDLElBQVYsQ0FBZUM7QUFoQlgsQ0FBcEI7QUFtQkFuQyxPQUFPLENBQUNvQyxZQUFSLEdBQXVCO0FBQ3JCbkMsRUFBQUEsSUFBSSxFQUFFLElBQUlXLElBQUosRUFEZTtBQUVyQlYsRUFBQUEsT0FBTyxFQUFFTCxpQkFBaUIsRUFGTDtBQUdyQk0sRUFBQUEsT0FBTyxFQUFFTCxpQkFBaUI7QUFITCxDQUF2QjtBQU1BLGVBQWVFLE9BQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiXG5pbXBvcnQgXCIuL3N0eWxlXCJcbmltcG9ydCBJY29uIGZyb20gXCIuLi9pY29uXCJcbmltcG9ydCB7IGdldERlZmF1bHRNYXhEYXRlLCBnZXREZWZhdWx0TWluRGF0ZSB9IGZyb20gXCIuL2NvcmVcIlxuXG5jb25zdCBwcmVmaXggPSBcImFkdWktZGF0ZVwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNhcHRpb25Qcm9wcyB7XG4gIFtrZXk6IHN0cmluZ106IGFueVxuICBkYXRlOiBEYXRlXG4gIG1heERhdGU6IERhdGVcbiAgbWluRGF0ZTogRGF0ZVxuICBvbkRhdGVDaGFuZ2U6IChkYXRlOiBEYXRlLCBlOiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB2b2lkXG59XG5cbi8qKlxuICog5pel5pyf6YCJ5oupIENhcHRpb25cbiAqL1xuY29uc3QgQ2FwdGlvbjogUmVhY3QuRkM8SUNhcHRpb25Qcm9wcz4gPSAoe1xuICBkYXRlLFxuICBtYXhEYXRlLFxuICBtaW5EYXRlLFxuICBvbkRhdGVDaGFuZ2UsXG59OiBJQ2FwdGlvblByb3BzKSA9PiB7XG4gIGNvbnN0IGhhbmRsZVllYXJDaGFuZ2UgPSAoZTogUmVhY3QuRm9ybUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IG5ld1llYXIgPSBwYXJzZUludChlLmN1cnJlbnRUYXJnZXQudmFsdWUsIDEwKVxuICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSlcbiAgICBuZXdEYXRlLnNldEZ1bGxZZWFyKG5ld1llYXIpXG4gICAgb25EYXRlQ2hhbmdlKG5ld0RhdGUsIGUpXG4gIH1cblxuICBjb25zdCBoYW5kbGVNb250aENoYW5nZSA9IChlOiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbmV3TW9udGggPSBwYXJzZUludChlLmN1cnJlbnRUYXJnZXQudmFsdWUsIDEwKVxuICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSlcbiAgICBuZXdEYXRlLnNldE1vbnRoKG5ld01vbnRoKVxuICAgIG9uRGF0ZUNoYW5nZShuZXdEYXRlLCBlKVxuICB9XG5cbiAgY29uc3QgbWluWWVhciA9IG1pbkRhdGUuZ2V0RnVsbFllYXIoKVxuICBjb25zdCBtYXhZZWFyID0gbWF4RGF0ZS5nZXRGdWxsWWVhcigpXG4gIGNvbnN0IHllYXJzID0gW21heFllYXJdXG4gIGZvciAobGV0IHllYXIgPSBtYXhZZWFyIC0gMTsgeWVhciA+PSBtaW5ZZWFyOyB5ZWFyIC09IDEpIHtcbiAgICB5ZWFycy5wdXNoKHllYXIpXG4gIH1cblxuICBjb25zdCBkaXNwbGF5TW9udGggPSBkYXRlLmdldE1vbnRoKClcbiAgY29uc3QgZGlzcGxheVllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgY29uc3Qgc3RhcnRNb250aCA9IGRpc3BsYXlZZWFyID09PSBtaW5ZZWFyID8gbWluRGF0ZS5nZXRNb250aCgpIDogMFxuICBjb25zdCBlbmRNb250aCA9IGRpc3BsYXlZZWFyID09PSBtYXhZZWFyID8gbWF4RGF0ZS5nZXRNb250aCgpICsgMSA6IDEyXG4gIGNvbnN0IG1vbnRocyA9IFtzdGFydE1vbnRoXVxuICBmb3IgKGxldCBtb250aCA9IHN0YXJ0TW9udGggKyAxOyBtb250aCA8IGVuZE1vbnRoOyBtb250aCArPSAxKSB7XG4gICAgbW9udGhzLnB1c2gobW9udGgpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWNhcHRpb25gfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LXNlbGVjdHNgfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeH0tc2VsZWN0WWVhcmB9PlxuICAgICAgICAgIDxzZWxlY3QgbmFtZT1cInllYXJcIiBvbkNoYW5nZT17aGFuZGxlWWVhckNoYW5nZX0gdmFsdWU9e2Rpc3BsYXlZZWFyfT5cbiAgICAgICAgICAgIHt5ZWFycy5tYXAoKHllYXIpID0+IChcbiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3llYXJ9IHZhbHVlPXt5ZWFyfT5cbiAgICAgICAgICAgICAgICB7eWVhcn3lubRcbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8SWNvbiBpY29uPVwidHJpYW5nbGUtZG93blwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1zZWxlY3RNb250aGB9PlxuICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgIG5hbWU9XCJtb250aFwiXG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlTW9udGhDaGFuZ2V9XG4gICAgICAgICAgICB2YWx1ZT17ZGlzcGxheU1vbnRofVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHttb250aHMubWFwKChtb250aCkgPT4gKFxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17bW9udGh9IHZhbHVlPXttb250aH0+XG4gICAgICAgICAgICAgICAge21vbnRoICsgMX3mnIhcbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8SWNvbiBpY29uPVwidHJpYW5nbGUtZG93blwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuQ2FwdGlvbi5wcm9wVHlwZXMgPSB7XG4gIC8qKlxuICAgKiDml6XmnJ9cbiAgICovXG4gIGRhdGU6IFByb3BUeXBlcy5hbnksXG4gIC8qKlxuICAgKiDmnIDlpKfpmZDliLbml6XmnJ9cbiAgICovXG4gIG1heERhdGU6IFByb3BUeXBlcy5hbnksXG4gIC8qKlxuICAgKiDmnIDlsI/pmZDliLbml6XmnJ9cbiAgICovXG4gIG1pbkRhdGU6IFByb3BUeXBlcy5hbnksXG4gIC8qKlxuICAgKiBoYW5kbGVyXG4gICAqL1xuICBvbkRhdGVDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59XG5cbkNhcHRpb24uZGVmYXVsdFByb3BzID0ge1xuICBkYXRlOiBuZXcgRGF0ZSgpLFxuICBtYXhEYXRlOiBnZXREZWZhdWx0TWF4RGF0ZSgpLFxuICBtaW5EYXRlOiBnZXREZWZhdWx0TWluRGF0ZSgpLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXB0aW9uXG4iXX0=