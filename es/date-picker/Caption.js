import * as React from "react";
import PropTypes from "prop-types";
import "./style";
import Icon from "../icon";
import { getDefaultMaxDate, getDefaultMinDate } from "./core";
var prefix = "adui-date";

var Caption = function Caption(_ref) {
  var date = _ref.date,
      maxDate = _ref.maxDate,
      minDate = _ref.minDate,
      onDateChange = _ref.onDateChange;

  var handleYearChange = function handleYearChange(e) {
    var newYear = parseInt(e.currentTarget.value, 10);
    var newDate = new Date(date.getTime());
    newDate.setFullYear(newYear);
    onDateChange(newDate, e);
  };

  var handleMonthChange = function handleMonthChange(e) {
    var newMonth = parseInt(e.currentTarget.value, 10);
    var newDate = new Date(date.getTime());
    newDate.setMonth(newMonth);
    onDateChange(newDate, e);
  };

  var minYear = minDate.getFullYear();
  var maxYear = maxDate.getFullYear();
  var years = [maxYear];

  for (var year = maxYear - 1; year >= minYear; year -= 1) {
    years.push(year);
  }

  var displayMonth = date.getMonth();
  var displayYear = date.getFullYear();
  var startMonth = displayYear === minYear ? minDate.getMonth() : 0;
  var endMonth = displayYear === maxYear ? maxDate.getMonth() + 1 : 12;
  var months = [startMonth];

  for (var month = startMonth + 1; month < endMonth; month += 1) {
    months.push(month);
  }

  if (!months.includes(displayMonth)) {
    months.unshift(displayMonth);
  }

  return React.createElement("div", {
    className: "".concat(prefix, "-caption")
  }, React.createElement("div", {
    className: "".concat(prefix, "-selects")
  }, React.createElement("div", {
    className: "".concat(prefix, "-selectYear")
  }, React.createElement("select", {
    name: "year",
    onChange: handleYearChange,
    value: displayYear
  }, years.map(function (year) {
    return React.createElement("option", {
      key: year,
      value: year
    }, year, "\u5E74");
  })), React.createElement(Icon, {
    icon: "triangle-down"
  })), React.createElement("div", {
    className: "".concat(prefix, "-selectMonth")
  }, React.createElement("select", {
    name: "month",
    onChange: handleMonthChange,
    value: displayMonth,
    "data-value": displayMonth
  }, months.map(function (month) {
    return React.createElement("option", {
      key: month,
      value: month
    }, month + 1, "\u6708");
  })), React.createElement(Icon, {
    icon: "triangle-down"
  }))));
};

Caption.propTypes = {
  date: PropTypes.any,
  maxDate: PropTypes.any,
  minDate: PropTypes.any,
  onDateChange: PropTypes.func.isRequired
};
Caption.defaultProps = {
  date: new Date(),
  maxDate: getDefaultMaxDate(),
  minDate: getDefaultMinDate()
};
export default Caption;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2NvbXBvbmVudHMvZGF0ZS1waWNrZXIvQ2FwdGlvbi50c3giXSwibmFtZXMiOlsiUmVhY3QiLCJQcm9wVHlwZXMiLCJJY29uIiwiZ2V0RGVmYXVsdE1heERhdGUiLCJnZXREZWZhdWx0TWluRGF0ZSIsInByZWZpeCIsIkNhcHRpb24iLCJkYXRlIiwibWF4RGF0ZSIsIm1pbkRhdGUiLCJvbkRhdGVDaGFuZ2UiLCJoYW5kbGVZZWFyQ2hhbmdlIiwiZSIsIm5ld1llYXIiLCJwYXJzZUludCIsImN1cnJlbnRUYXJnZXQiLCJ2YWx1ZSIsIm5ld0RhdGUiLCJEYXRlIiwiZ2V0VGltZSIsInNldEZ1bGxZZWFyIiwiaGFuZGxlTW9udGhDaGFuZ2UiLCJuZXdNb250aCIsInNldE1vbnRoIiwibWluWWVhciIsImdldEZ1bGxZZWFyIiwibWF4WWVhciIsInllYXJzIiwieWVhciIsInB1c2giLCJkaXNwbGF5TW9udGgiLCJnZXRNb250aCIsImRpc3BsYXlZZWFyIiwic3RhcnRNb250aCIsImVuZE1vbnRoIiwibW9udGhzIiwibW9udGgiLCJpbmNsdWRlcyIsInVuc2hpZnQiLCJtYXAiLCJwcm9wVHlwZXMiLCJhbnkiLCJmdW5jIiwiaXNSZXF1aXJlZCIsImRlZmF1bHRQcm9wcyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLQSxLQUFaLE1BQXVCLE9BQXZCO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixZQUF0QjtBQUNBLE9BQU8sU0FBUDtBQUNBLE9BQU9DLElBQVAsTUFBaUIsU0FBakI7QUFDQSxTQUFTQyxpQkFBVCxFQUE0QkMsaUJBQTVCLFFBQXFELFFBQXJEO0FBRUEsSUFBTUMsTUFBTSxHQUFHLFdBQWY7O0FBYUEsSUFBTUMsT0FBZ0MsR0FBRyxTQUFuQ0EsT0FBbUMsT0FLcEI7QUFBQSxNQUpuQkMsSUFJbUIsUUFKbkJBLElBSW1CO0FBQUEsTUFIbkJDLE9BR21CLFFBSG5CQSxPQUdtQjtBQUFBLE1BRm5CQyxPQUVtQixRQUZuQkEsT0FFbUI7QUFBQSxN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QUFJLEVBQUM7QUFBWCxJQVJGLENBREYsRUFXRTtBQUFLLElBQUEsU0FBUyxZQUFLdkIsTUFBTDtBQUFkLEtBQ0U7QUFDRSxJQUFBLElBQUksRUFBQyxPQURQO0FBRUUsSUFBQSxRQUFRLEVBQUVnQixpQkFGWjtBQUdFLElBQUEsS0FBSyxFQUFFUyxZQUhUO0FBSUUsa0JBQVlBO0FBSmQsS0FNR0ssTUFBTSxDQUFDSSxHQUFQLENBQVcsVUFBQ0gsS0FBRDtBQUFBLFdBQ1Y7QUFBUSxNQUFBLEdBQUcsRUFBRUEsS0FBYjtBQUFvQixNQUFBLEtBQUssRUFBRUE7QUFBM0IsT0FDR0EsS0FBSyxHQUFHLENBRFgsV0FEVTtBQUFBLEdBQVgsQ0FOSCxDQURGLEVBYUUsb0JBQUMsSUFBRDtBQUFNLElBQUEsSUFBSSxFQUFDO0FBQVgsSUFiRixDQVhGLENBREYsQ0FERjtBQStCRCxDQXpFRDs7QUEyRUE5QixPQUFPLENBQUNrQyxTQUFSLEdBQW9CO0FBSWxCakMsRUFBQUEsSUFBSSxFQUFFTixTQUFTLENBQUN3QyxHQUpFO0FBUWxCakMsRUFBQUEsT0FBTyxFQUFFUCxTQUFTLENBQUN3QyxHQVJEO0FBWWxCaEMsRUFBQUEsT0FBTyxFQUFFUixTQUFTLENBQUN3QyxHQVpEO0FBZ0JsQi9CLEVBQUFBLFlBQVksRUFBRVQsU0FBUyxDQUFDeUMsSUFBVixDQUFlQztBQWhCWCxDQUFwQjtBQW1CQXJDLE9BQU8sQ0FBQ3NDLFlBQVIsR0FBdUI7QUFDckJyQyxFQUFBQSxJQUFJLEVBQUUsSUFBSVcsSUFBSixFQURlO0FBRXJCVixFQUFBQSxPQUFPLEVBQUVMLGlCQUFpQixFQUZMO0FBR3JCTSxFQUFBQSxPQUFPLEVBQUVMLGlCQUFpQjtBQUhMLENBQXZCO0FBTUEsZUFBZUUsT0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBcIi4vc3R5bGVcIlxuaW1wb3J0IEljb24gZnJvbSBcIi4uL2ljb25cIlxuaW1wb3J0IHsgZ2V0RGVmYXVsdE1heERhdGUsIGdldERlZmF1bHRNaW5EYXRlIH0gZnJvbSBcIi4vY29yZVwiXG5cbmNvbnN0IHByZWZpeCA9IFwiYWR1aS1kYXRlXCJcblxuZXhwb3J0IGludGVyZmFjZSBJQ2FwdGlvblByb3BzIHtcbiAgW2tleTogc3RyaW5nXTogYW55XG4gIGRhdGU6IERhdGVcbiAgbWF4RGF0ZTogRGF0ZVxuICBtaW5EYXRlOiBEYXRlXG4gIG9uRGF0ZUNoYW5nZTogKGRhdGU6IERhdGUsIGU6IFJlYWN0LkZvcm1FdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHZvaWRcbn1cblxuLyoqXG4gKiDml6XmnJ/pgInmi6kgQ2FwdGlvblxuICovXG5jb25zdCBDYXB0aW9uOiBSZWFjdC5GQzxJQ2FwdGlvblByb3BzPiA9ICh7XG4gIGRhdGUsXG4gIG1heERhdGUsXG4gIG1pbkRhdGUsXG4gIG9uRGF0ZUNoYW5nZSxcbn06IElDYXB0aW9uUHJvcHMpID0+IHtcbiAgY29uc3QgaGFuZGxlWWVhckNoYW5nZSA9IChlOiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbmV3WWVhciA9IHBhcnNlSW50KGUuY3VycmVudFRhcmdldC52YWx1ZSwgMTApXG4gICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKVxuICAgIG5ld0RhdGUuc2V0RnVsbFllYXIobmV3WWVhcilcbiAgICBvbkRhdGVDaGFuZ2UobmV3RGF0ZSwgZSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZU1vbnRoQ2hhbmdlID0gKGU6IFJlYWN0LkZvcm1FdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBuZXdNb250aCA9IHBhcnNlSW50KGUuY3VycmVudFRhcmdldC52YWx1ZSwgMTApXG4gICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKVxuICAgIG5ld0RhdGUuc2V0TW9udGgobmV3TW9udGgpXG4gICAgb25EYXRlQ2hhbmdlKG5ld0RhdGUsIGUpXG4gIH1cblxuICBjb25zdCBtaW5ZZWFyID0gbWluRGF0ZS5nZXRGdWxsWWVhcigpXG4gIGNvbnN0IG1heFllYXIgPSBtYXhEYXRlLmdldEZ1bGxZZWFyKClcbiAgY29uc3QgeWVhcnMgPSBbbWF4WWVhcl1cbiAgZm9yIChsZXQgeWVhciA9IG1heFllYXIgLSAxOyB5ZWFyID49IG1pblllYXI7IHllYXIgLT0gMSkge1xuICAgIHllYXJzLnB1c2goeWVhcilcbiAgfVxuXG4gIGNvbnN0IGRpc3BsYXlNb250aCA9IGRhdGUuZ2V0TW9udGgoKVxuICBjb25zdCBkaXNwbGF5WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuXG4gIGNvbnN0IHN0YXJ0TW9udGggPSBkaXNwbGF5WWVhciA9PT0gbWluWWVhciA/IG1pbkRhdGUuZ2V0TW9udGgoKSA6IDBcbiAgY29uc3QgZW5kTW9udGggPSBkaXNwbGF5WWVhciA9PT0gbWF4WWVhciA/IG1heERhdGUuZ2V0TW9udGgoKSArIDEgOiAxMlxuICBjb25zdCBtb250aHMgPSBbc3RhcnRNb250aF1cbiAgZm9yIChsZXQgbW9udGggPSBzdGFydE1vbnRoICsgMTsgbW9udGggPCBlbmRNb250aDsgbW9udGggKz0gMSkge1xuICAgIG1vbnRocy5wdXNoKG1vbnRoKVxuICB9XG5cbiAgaWYgKCFtb250aHMuaW5jbHVkZXMoZGlzcGxheU1vbnRoKSkge1xuICAgIG1vbnRocy51bnNoaWZ0KGRpc3BsYXlNb250aClcbiAgfVxuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1jYXB0aW9uYH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1zZWxlY3RzYH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LXNlbGVjdFllYXJgfT5cbiAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJ5ZWFyXCIgb25DaGFuZ2U9e2hhbmRsZVllYXJDaGFuZ2V9IHZhbHVlPXtkaXNwbGF5WWVhcn0+XG4gICAgICAgICAgICB7eWVhcnMubWFwKCh5ZWFyKSA9PiAoXG4gICAgICAgICAgICAgIDxvcHRpb24ga2V5PXt5ZWFyfSB2YWx1ZT17eWVhcn0+XG4gICAgICAgICAgICAgICAge3llYXJ95bm0XG4gICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPEljb24gaWNvbj1cInRyaWFuZ2xlLWRvd25cIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeH0tc2VsZWN0TW9udGhgfT5cbiAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICBuYW1lPVwibW9udGhcIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZU1vbnRoQ2hhbmdlfVxuICAgICAgICAgICAgdmFsdWU9e2Rpc3BsYXlNb250aH1cbiAgICAgICAgICAgIGRhdGEtdmFsdWU9e2Rpc3BsYXlNb250aH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bW9udGhzLm1hcCgobW9udGgpID0+IChcbiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e21vbnRofSB2YWx1ZT17bW9udGh9PlxuICAgICAgICAgICAgICAgIHttb250aCArIDF95pyIXG4gICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPEljb24gaWNvbj1cInRyaWFuZ2xlLWRvd25cIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbkNhcHRpb24ucHJvcFR5cGVzID0ge1xuICAvKipcbiAgICog5pel5pyfXG4gICAqL1xuICBkYXRlOiBQcm9wVHlwZXMuYW55LFxuICAvKipcbiAgICog5pyA5aSn6ZmQ5Yi25pel5pyfXG4gICAqL1xuICBtYXhEYXRlOiBQcm9wVHlwZXMuYW55LFxuICAvKipcbiAgICog5pyA5bCP6ZmQ5Yi25pel5pyfXG4gICAqL1xuICBtaW5EYXRlOiBQcm9wVHlwZXMuYW55LFxuICAvKipcbiAgICogaGFuZGxlclxuICAgKi9cbiAgb25EYXRlQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufVxuXG5DYXB0aW9uLmRlZmF1bHRQcm9wcyA9IHtcbiAgZGF0ZTogbmV3IERhdGUoKSxcbiAgbWF4RGF0ZTogZ2V0RGVmYXVsdE1heERhdGUoKSxcbiAgbWluRGF0ZTogZ2V0RGVmYXVsdE1pbkRhdGUoKSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FwdGlvblxuIl19