(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1735:function(n,s,a){n.exports={basic:a(1790)}},1790:function(n,s){n.exports={content:["article",["p","结合卡片使用："],["pre",{lang:"jsx",highlighted:'  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      src<span class="token punctuation">:</span> <span class="token string">"http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=3d9fa86fff770ff5a3f3b16c50b813e1&amp;filekey=30340201010420301e02016d0402534804103d9fa86fff770ff5a3f3b16c50b813e10203019000040d00000004627466730000000131&amp;hy=SH&amp;storeid=32303139303831333131303430363030306362393765313336666664393331333630333230613030303030303664&amp;bizid=1023"</span><span class="token punctuation">,</span>\n      progress<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleUpload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> x <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"INPUT"</span><span class="token punctuation">)</span>\n      x<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"file"</span><span class="token punctuation">)</span>\n      x<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"accept"</span><span class="token punctuation">,</span> <span class="token string">"image/x-png,image/gif,image/jpeg"</span><span class="token punctuation">)</span>\n      x<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n        <span class="token comment" spellcheck="true">// 模拟进度</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> progress<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> progress<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> progress<span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> progress<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> progress<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> src<span class="token punctuation">:</span> <span class="token string">"http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=3d9fa86fff770ff5a3f3b16c50b813e1&amp;filekey=30340201010420301e02016d0402534804103d9fa86fff770ff5a3f3b16c50b813e10203019000040d00000004627466730000000131&amp;hy=SH&amp;storeid=32303139303831333131303430363030306362393765313336666664393331333630333230613030303030303664&amp;bizid=1023"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1300</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span>\n      x<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>componentDidMount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>upload <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>upload<span class="token punctuation">.</span>uploadElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> <span class="token punctuation">{</span> uploadElement <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>upload\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uploadElement<span class="token punctuation">,</span> <span class="token string">"yijie"</span><span class="token punctuation">)</span>\n        uploadElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token string">"yijie"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  render <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> progress<span class="token punctuation">,</span> src <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state\n\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Upload.Img</span>\n          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>upload <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>upload <span class="token operator">=</span> upload<span class="token punctuation">}</span></span>\n          <span class="token attr-name">progress</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>progress<span class="token punctuation">}</span></span>\n          <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>src<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onIconClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> src<span class="token punctuation">:</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">onUpload</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleUpload<span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>'},["code",'  constructor(props) {\n    super(props)\n\n    this.state = {\n      src: "http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=3d9fa86fff770ff5a3f3b16c50b813e1&filekey=30340201010420301e02016d0402534804103d9fa86fff770ff5a3f3b16c50b813e10203019000040d00000004627466730000000131&hy=SH&storeid=32303139303831333131303430363030306362393765313336666664393331333630333230613030303030303664&bizid=1023",\n      progress: null,\n    }\n\n    this.handleUpload = () => {\n      const x = document.createElement("INPUT")\n      x.setAttribute("type", "file")\n      x.setAttribute("accept", "image/x-png,image/gif,image/jpeg")\n      x.addEventListener("change", () => {\n        // 模拟进度\n        this.setState({ progress: 0})\n        setTimeout(() => { this.setState({ progress: 20}) }, 200)\n        setTimeout(() => { this.setState({ progress: 80}) }, 500)\n        setTimeout(() => { this.setState({ progress: 100}) }, 1000)\n        setTimeout(() => { this.setState({ progress: null, src: "http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=3d9fa86fff770ff5a3f3b16c50b813e1&filekey=30340201010420301e02016d0402534804103d9fa86fff770ff5a3f3b16c50b813e10203019000040d00000004627466730000000131&hy=SH&storeid=32303139303831333131303430363030306362393765313336666664393331333630333230613030303030303664&bizid=1023" }) }, 1300)\n      })\n      x.click()\n    }\n\n    this.componentDidMount = () => {\n      if (this.upload && this.upload.uploadElement) {\n        const { uploadElement } = this.upload\n        console.log(uploadElement, "yijie")\n        uploadElement.addEventListener("click", () => {\n          console.log("click", "yijie")\n        })\n      }\n    }\n  }\n\n  render () {\n    const { progress, src } = this.state\n\n    return (\n      <section>\n        <Upload.Img\n          ref={upload => this.upload = upload}\n          progress={progress}\n          src={src}\n          onIconClick={() => this.setState({ src: "" })}\n          onUpload={this.handleUpload}\n        />\n      </section>\n    )\n  }']]],meta:{order:0,title:{"zh-CN":"示例","en-US":"Type"},filename:"components/upload/demo/basic.md"}}}}]);