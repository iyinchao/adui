"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isDayInRange = exports.clone = exports.convertDateRangeToString = exports.convertDateToString = exports.isLegalDateRangeString = exports.isLegalDateString = exports.areSameDay = exports.areSameMonth = exports.getDefaultMinDate = exports.getDefaultMaxDate = exports.WEEKDAYS_SHORT_EN = exports.WEEKDAYS_LONG_EN = exports.MONTHS_EN = exports.WEEKDAYS_SHORT = exports.WEEKDAYS_LONG = exports.MONTHS = void 0;

var _dayPickerReact = require("day-picker-react");

var MONTHS = ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"];
exports.MONTHS = MONTHS;
var WEEKDAYS_LONG = ["周日", "周一", "周二", "周三", "周四", "周五", "周六"];
exports.WEEKDAYS_LONG = WEEKDAYS_LONG;
var WEEKDAYS_SHORT = ["日", "一", "二", "三", "四", "五", "六"];
exports.WEEKDAYS_SHORT = WEEKDAYS_SHORT;
var MONTHS_EN = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
exports.MONTHS_EN = MONTHS_EN;
var WEEKDAYS_LONG_EN = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
exports.WEEKDAYS_LONG_EN = WEEKDAYS_LONG_EN;
var WEEKDAYS_SHORT_EN = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
exports.WEEKDAYS_SHORT_EN = WEEKDAYS_SHORT_EN;

var getDefaultMaxDate = function getDefaultMaxDate() {
  var date = new Date();
  date.setFullYear(date.getFullYear());
  date.setMonth(11, 31);
  return date;
};

exports.getDefaultMaxDate = getDefaultMaxDate;

var getDefaultMinDate = function getDefaultMinDate() {
  var date = new Date();
  date.setFullYear(date.getFullYear() - 4);
  date.setMonth(0, 1);
  return date;
};

exports.getDefaultMinDate = getDefaultMinDate;

var areSameMonth = function areSameMonth(date1, date2) {
  return date1 != null && date2 != null && date1.getMonth() === date2.getMonth() && date1.getFullYear() === date2.getFullYear();
};

exports.areSameMonth = areSameMonth;

var areSameDay = function areSameDay(date1, date2) {
  return areSameMonth(date1, date2) && date1.getDate() === date2.getDate();
};

exports.areSameDay = areSameDay;

var isLegalDateString = function isLegalDateString(date) {
  if (date.trim() === "") {
    return true;
  }

  var strings = date.split("-");

  if (strings.length === 3 && strings[0].length === 4 && strings[1].length === 2 && strings[2].length === 2 && !isNaN(Number(strings[0])) && !isNaN(Number(strings[1])) && !isNaN(Number(strings[2]))) {
    var checkLeapYear = function checkLeapYear(str) {
      return str % 4 === 0 && str % 100 !== 0 || str % 400 === 0;
    };

    var solar = [1, 3, 5, 7, 8, 10, 12];
    var lunar = [4, 6, 9, 11];
    var year = parseInt(strings[0], 10);
    var month = parseInt(strings[1], 10);
    var day = parseInt(strings[2], 10);

    if (month > 0 && month < 13) {
      if (solar.includes(month)) {
        if (day > 0 && day < 32) {
          return true;
        }
      } else if (lunar.includes(month)) {
        if (day > 0 && day < 31) {
          return true;
        }
      } else {
        if (checkLeapYear(year) && day > 0 && day < 30) {
          return true;
        }

        if (!checkLeapYear(year) && day > 0 && day < 29) {
          return true;
        }
      }
    }

    return false;
  }

  return false;
};

exports.isLegalDateString = isLegalDateString;

var isLegalDateRangeString = function isLegalDateRangeString(date) {
  if (date.trim() === "") {
    return true;
  }

  var strings = date.split(" - ");
  return strings.length === 2 && strings[0].length && strings[1].length && isLegalDateString(strings[0]) && isLegalDateString(strings[1]);
};

exports.isLegalDateRangeString = isLegalDateRangeString;

var convertDateToString = function convertDateToString(date) {
  if (!date) {
    return "";
  }

  var dateString = date.toLocaleDateString("zh-Hans-CN");
  var strings = dateString.split("/");

  var addZero = function addZero(s) {
    if (parseInt(s, 10) < 10) {
      return "0".concat(s);
    }

    return s;
  };

  return "".concat(strings[0], "-").concat(addZero(strings[1]), "-").concat(addZero(strings[2]));
};

exports.convertDateToString = convertDateToString;

var convertDateRangeToString = function convertDateRangeToString(range) {
  if (!range) {
    return "";
  }

  var from = range[0];
  var to = range[1];

  if (!(from && to)) {
    return "";
  }

  if (_dayPickerReact.DateUtils.isDayAfter(to, from)) {
    return "".concat(convertDateToString(from), " - ").concat(convertDateToString(to));
  }

  return "".concat(convertDateToString(to), " - ").concat(convertDateToString(from));
};

exports.convertDateRangeToString = convertDateRangeToString;

var clone = function clone(d) {
  return d ? new Date(d.getTime()) : null;
};

exports.clone = clone;

var isDayInRange = function isDayInRange(date, dateRange) {
  var exclusive = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  if (date === null || dateRange[0] === null || dateRange[1] === null) {
    return false;
  }

  var day = clone(date);
  var start = clone(dateRange[0]);
  var end = clone(dateRange[1]);

  if (day) {
    day.setHours(0, 0, 0, 0);
  }

  if (start) {
    start.setHours(0, 0, 0, 0);
  }

  if (end) {
    end.setHours(0, 0, 0, 0);
  }

  return start && day && end ? start <= day && day <= end && (!exclusive || !areSameDay(start, day) && !areSameDay(day, end)) : null;
};

exports.isDayInRange = isDayInRange;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2NvbXBvbmVudHMvZGF0ZS1waWNrZXIvY29yZS50cyJdLCJuYW1lcyI6WyJNT05USFMiLCJXRUVLREFZU19MT05HIiwiV0VFS0RBWVNfU0hPUlQiLCJNT05USFNfRU4iLCJXRUVLREFZU19MT05HX0VOIiwiV0VFS0RBWVNfU0hPUlRfRU4iLCJnZXREZWZhdWx0TWF4RGF0ZSIsImRhdGUiLCJEYXRlIiwic2V0RnVsbFllYXIiLCJnZXRGdWxsWWVhciIsInNldE1vbnRoIiwiZ2V0RGVmYXVsdE1pbkRhdGUiLCJhcmVTYW1lTW9udGgiLCJkYXRlMSIsImRhdGUyIiwiZ2V0TW9udGgiLCJhcmVTYW1lRGF5IiwiZ2V0RGF0ZSIsImlzTGVnYWxEYXRlU3RyaW5nIiwidHJpbSIsInN0cmluZ3MiLCJzcGxpdCIsImxlbmd0aCIsImlzTmFOIiwiTnVtYmVyIiwiY2hlY2tMZWFwWWVhciIsInN0ciIsInNvbGFyIiwibHVuYXIiLCJ5ZWFyIiwicGFyc2VJbnQiLCJtb250aCIsImRheSIsImluY2x1ZGVzIiwiaXNMZWdhbERhdGVSYW5nZVN0cmluZyIsImNvbnZlcnREYXRlVG9TdHJpbmciLCJkYXRlU3RyaW5nIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiYWRkWmVybyIsInMiLCJjb252ZXJ0RGF0ZVJhbmdlVG9TdHJpbmciLCJyYW5nZSIsImZyb20iLCJ0byIsIkRhdGVVdGlscyIsImlzRGF5QWZ0ZXIiLCJjbG9uZSIsImQiLCJnZXRUaW1lIiwiaXNEYXlJblJhbmdlIiwiZGF0ZVJhbmdlIiwiZXhjbHVzaXZlIiwic3RhcnQiLCJlbmQiLCJzZXRIb3VycyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVPLElBQU1BLE1BQU0sR0FBRyxDQUNwQixJQURvQixFQUVwQixJQUZvQixFQUdwQixJQUhvQixFQUlwQixJQUpvQixFQUtwQixJQUxvQixFQU1wQixJQU5vQixFQU9wQixJQVBvQixFQVFwQixJQVJvQixFQVNwQixJQVRvQixFQVVwQixLQVZvQixFQVdwQixLQVhvQixFQVlwQixLQVpvQixDQUFmOztBQWNBLElBQU1DLGFBQWEsR0FBRyxDQUMzQixJQUQyQixFQUUzQixJQUYyQixFQUczQixJQUgyQixFQUkzQixJQUoyQixFQUszQixJQUwyQixFQU0zQixJQU4yQixFQU8zQixJQVAyQixDQUF0Qjs7QUFTQSxJQUFNQyxjQUFjLEdBQUcsQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsR0FBaEIsRUFBcUIsR0FBckIsRUFBMEIsR0FBMUIsRUFBK0IsR0FBL0IsQ0FBdkI7O0FBRUEsSUFBTUMsU0FBUyxHQUFHLENBQ3ZCLFNBRHVCLEVBRXZCLFVBRnVCLEVBR3ZCLE9BSHVCLEVBSXZCLE9BSnVCLEVBS3ZCLEtBTHVCLEVBTXZCLE1BTnVCLEVBT3ZCLE1BUHVCLEVBUXZCLFFBUnVCLEVBU3ZCLFdBVHVCLEVBVXZCLFNBVnVCLEVBV3ZCLFVBWHVCLEVBWXZCLFVBWnVCLENBQWxCOztBQWNBLElBQU1DLGdCQUFnQixHQUFHLENBQzlCLFFBRDhCLEVBRTlCLFFBRjhCLEVBRzlCLFNBSDhCLEVBSTlCLFdBSjhCLEVBSzlCLFVBTDhCLEVBTTlCLFFBTjhCLEVBTzlCLFVBUDhCLENBQXpCOztBQVNBLElBQU1DLGlCQUFpQixHQUFHLENBQUMsSUFBRCxFQUFPLElBQVAsRUFBYSxJQUFiLEVBQW1CLElBQW5CLEVBQXlCLElBQXpCLEVBQStCLElBQS9CLEVBQXFDLElBQXJDLENBQTFCOzs7QUFFQSxJQUFNQyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLEdBQU07QUFDckMsTUFBTUMsSUFBSSxHQUFHLElBQUlDLElBQUosRUFBYjtBQUNBRCxFQUFBQSxJQUFJLENBQUNFLFdBQUwsQ0FBaUJGLElBQUksQ0FBQ0csV0FBTCxFQUFqQjtBQUNBSCxFQUFBQSxJQUFJLENBQUNJLFFBQUwsQ0FBYyxFQUFkLEVBQWtCLEVBQWxCO0FBQ0EsU0FBT0osSUFBUDtBQUNELENBTE07Ozs7QUFPQSxJQUFNSyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLEdBQU07QUFDckMsTUFBTUwsSUFBSSxHQUFHLElBQUlDLElBQUosRUFBYjtBQUNBRCxFQUFBQSxJQUFJLENBQUNFLFdBQUwsQ0FBaUJGLElBQUksQ0FBQ0csV0FBTCxLQUFxQixDQUF0QztBQUNBSCxFQUFBQSxJQUFJLENBQUNJLFFBQUwsQ0FBYyxDQUFkLEVBQWlCLENBQWpCO0FBQ0EsU0FBT0osSUFBUDtBQUNELENBTE07Ozs7QUFPQSxJQUFNTSxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFDQyxLQUFELEVBQXNCQyxLQUF0QjtBQUFBLFNBQzFCRCxLQUFLLElBQUksSUFBVCxJQUNBQyxLQUFLLElBQUksSUFEVCxJQUVBRCxLQUFLLENBQUNFLFFBQU4sT0FBcUJELEtBQUssQ0FBQ0MsUUFBTixFQUZyQixJQUdBRixLQUFLLENBQUNKLFdBQU4sT0FBd0JLLEtBQUssQ0FBQ0wsV0FBTixFQUpFO0FBQUEsQ0FBckI7Ozs7QUFNQSxJQUFNTyxVQUFVLEdBQUcsU0FBYkEsVUFBYSxDQUFDSCxLQUFELEVBQWNDLEtBQWQ7QUFBQSxTQUN4QkYsWUFBWSxDQUFDQyxLQUFELEVBQVFDLEtBQVIsQ0FBWixJQUE4QkQsS0FBSyxDQUFDSSxPQUFOLE9BQW9CSCxLQUFLLENBQUNHLE9BQU4sRUFEMUI7QUFBQSxDQUFuQjs7OztBQUdBLElBQU1DLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBb0IsQ0FBQ1osSUFBRCxFQUFrQjtBQUNqRCxNQUFJQSxJQUFJLENBQUNhLElBQUwsT0FBZ0IsRUFBcEIsRUFBd0I7QUFDdEIsV0FBTyxJQUFQO0FBQ0Q7O0FBQ0QsTUFBTUMsT0FBTyxHQUFHZCxJQUFJLENBQUNlLEtBQUwsQ0FBVyxHQUFYLENBQWhCOztBQUNBLE1BQ0VELE9BQU8sQ0FBQ0UsTUFBUixLQUFtQixDQUFuQixJQUNBRixPQUFPLENBQUMsQ0FBRCxDQUFQLENBQVdFLE1BQVgsS0FBc0IsQ0FEdEIsSUFFQUYsT0FBTyxDQUFDLENBQUQsQ0FBUCxDQUFXRSxNQUFYLEtBQXNCLENBRnRCLElBR0FGLE9BQU8sQ0FBQyxDQUFELENBQVAsQ0FBV0UsTUFBWCxLQUFzQixDQUh0QixJQUlBLENBQUNDLEtBQUssQ0FBQ0MsTUFBTSxDQUFDSixPQUFPLENBQUMsQ0FBRCxDQUFSLENBQVAsQ0FKTixJQUtBLENBQUNHLEtBQUssQ0FBQ0MsTUFBTSxDQUFDSixPQUFPLENBQUMsQ0FBRCxDQUFSLENBQVAsQ0FMTixJQU1BLENBQUNHLEtBQUssQ0FBQ0MsTUFBTSxDQUFDSixPQUFPLENBQUMsQ0FBRCxDQUFSLENBQVAsQ0FQUixFQVFFO0FBQ0EsUUFBTUssYUFBYSxHQUFHLFNBQWhCQSxhQUFnQixDQUFDQyxHQUFEO0FBQUEsYUFDbkJBLEdBQUcsR0FBRyxDQUFOLEtBQVksQ0FBWixJQUFpQkEsR0FBRyxHQUFHLEdBQU4sS0FBYyxDQUFoQyxJQUFzQ0EsR0FBRyxHQUFHLEdBQU4sS0FBYyxDQURoQztBQUFBLEtBQXRCOztBQUVBLFFBQU1DLEtBQUssR0FBRyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLEVBQWhCLEVBQW9CLEVBQXBCLENBQWQ7QUFDQSxRQUFNQyxLQUFLLEdBQUcsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxFQUFWLENBQWQ7QUFDQSxRQUFNQyxJQUFJLEdBQUdDLFFBQVEsQ0FBQ1YsT0FBTyxDQUFDLENBQUQsQ0FBUixFQUFhLEVBQWIsQ0FBckI7QUFDQSxRQUFNVyxLQUFLLEdBQUdELFFBQVEsQ0FBQ1YsT0FBTyxDQUFDLENBQUQsQ0FBUixFQUFhLEVBQWIsQ0FBdEI7QUFDQSxRQUFNWSxHQUFHLEdBQUdGLFFBQVEsQ0FBQ1YsT0FBTyxDQUFDLENBQUQsQ0FBUixFQUFhLEVBQWIsQ0FBcEI7O0FBQ0EsUUFBSVcsS0FBSyxHQUFHLENBQVIsSUFBYUEsS0FBSyxHQUFHLEVBQXpCLEVBQTZCO0FBQzNCLFVBQUlKLEtBQUssQ0FBQ00sUUFBTixDQUFlRixLQUFmLENBQUosRUFBMkI7QUFDekIsWUFBSUMsR0FBRyxHQUFHLENBQU4sSUFBV0EsR0FBRyxHQUFHLEVBQXJCLEVBQXlCO0FBQ3ZCLGlCQUFPLElBQVA7QUFDRDtBQUNGLE9BSkQsTUFJTyxJQUFJSixLQUFLLENBQUNLLFFBQU4sQ0FBZUYsS0FBZixDQUFKLEVBQTJCO0FBQ2hDLFlBQUlDLEdBQUcsR0FBRyxDQUFOLElBQVdBLEdBQUcsR0FBRyxFQUFyQixFQUF5QjtBQUN2QixpQkFBTyxJQUFQO0FBQ0Q7QUFDRixPQUpNLE1BSUE7QUFDTCxZQUFJUCxhQUFhLENBQUNJLElBQUQsQ0FBYixJQUF1QkcsR0FBRyxHQUFHLENBQTdCLElBQWtDQSxHQUFHLEdBQUcsRUFBNUMsRUFBZ0Q7QUFDOUMsaUJBQU8sSUFBUDtBQUNEOztBQUNELFlBQUksQ0FBQ1AsYUFBYSxDQUFDSSxJQUFELENBQWQsSUFBd0JHLEdBQUcsR0FBRyxDQUE5QixJQUFtQ0EsR0FBRyxHQUFHLEVBQTdDLEVBQWlEO0FBQy9DLGlCQUFPLElBQVA7QUFDRDtBQUNGO0FBQ0Y7O0FBQ0QsV0FBTyxLQUFQO0FBQ0Q7O0FBQ0QsU0FBTyxLQUFQO0FBQ0QsQ0ExQ007Ozs7QUE0Q0EsSUFBTUUsc0JBQXNCLEdBQUcsU0FBekJBLHNCQUF5QixDQUFDNUIsSUFBRCxFQUFrQjtBQUN0RCxNQUFJQSxJQUFJLENBQUNhLElBQUwsT0FBZ0IsRUFBcEIsRUFBd0I7QUFDdEIsV0FBTyxJQUFQO0FBQ0Q7O0FBQ0QsTUFBTUMsT0FBTyxHQUFHZCxJQUFJLENBQUNlLEtBQUwsQ0FBVyxLQUFYLENBQWhCO0FBQ0EsU0FDRUQsT0FBTyxDQUFDRSxNQUFSLEtBQW1CLENBQW5CLElBQ0FGLE9BQU8sQ0FBQyxDQUFELENBQVAsQ0FBV0UsTUFEWCxJQUVBRixPQUFPLENBQUMsQ0FBRCxDQUFQLENBQVdFLE1BRlgsSUFHQUosaUJBQWlCLENBQUNFLE9BQU8sQ0FBQyxDQUFELENBQVIsQ0FIakIsSUFJQUYsaUJBQWlCLENBQUNFLE9BQU8sQ0FBQyxDQUFELENBQVIsQ0FMbkI7QUFPRCxDQVpNOzs7O0FBY0EsSUFBTWUsbUJBQW1CLEdBQUcsU0FBdEJBLG1CQUFzQixDQUFDN0IsSUFBRCxFQUE2QjtBQUM5RCxNQUFJLENBQUNBLElBQUwsRUFBVztBQUNULFdBQU8sRUFBUDtBQUNEOztBQUNELE1BQU04QixVQUFVLEdBQUc5QixJQUFJLENBQUMrQixrQkFBTCxDQUF3QixZQUF4QixDQUFuQjtBQUNBLE1BQU1qQixPQUFPLEdBQUdnQixVQUFVLENBQUNmLEtBQVgsQ0FBaUIsR0FBakIsQ0FBaEI7O0FBQ0EsTUFBTWlCLE9BQU8sR0FBRyxTQUFWQSxPQUFVLENBQUNDLENBQUQsRUFBZTtBQUM3QixRQUFJVCxRQUFRLENBQUNTLENBQUQsRUFBSSxFQUFKLENBQVIsR0FBa0IsRUFBdEIsRUFBMEI7QUFDeEIsd0JBQVdBLENBQVg7QUFDRDs7QUFDRCxXQUFPQSxDQUFQO0FBQ0QsR0FMRDs7QUFNQSxtQkFBVW5CLE9BQU8sQ0FBQyxDQUFELENBQWpCLGNBQXdCa0IsT0FBTyxDQUFDbEIsT0FBTyxDQUFDLENBQUQsQ0FBUixDQUEvQixjQUErQ2tCLE9BQU8sQ0FBQ2xCLE9BQU8sQ0FBQyxDQUFELENBQVIsQ0FBdEQ7QUFDRCxDQWJNOzs7O0FBZUEsSUFBTW9CLHdCQUF3QixHQUFHLFNBQTNCQSx3QkFBMkIsQ0FDdENDLEtBRHNDLEVBRW5DO0FBQ0gsTUFBSSxDQUFDQSxLQUFMLEVBQVk7QUFDVixXQUFPLEVBQVA7QUFDRDs7QUFDRCxNQUFNQyxJQUFJLEdBQUdELEtBQUssQ0FBQyxDQUFELENBQWxCO0FBQ0EsTUFBTUUsRUFBRSxHQUFHRixLQUFLLENBQUMsQ0FBRCxDQUFoQjs7QUFDQSxNQUFJLEVBQUVDLElBQUksSUFBSUMsRUFBVixDQUFKLEVBQW1CO0FBQ2pCLFdBQU8sRUFBUDtBQUNEOztBQUNELE1BQUlDLDBCQUFVQyxVQUFWLENBQXFCRixFQUFyQixFQUF5QkQsSUFBekIsQ0FBSixFQUFvQztBQUNsQyxxQkFBVVAsbUJBQW1CLENBQUNPLElBQUQsQ0FBN0IsZ0JBQXlDUCxtQkFBbUIsQ0FBQ1EsRUFBRCxDQUE1RDtBQUNEOztBQUNELG1CQUFVUixtQkFBbUIsQ0FBQ1EsRUFBRCxDQUE3QixnQkFBdUNSLG1CQUFtQixDQUFDTyxJQUFELENBQTFEO0FBQ0QsQ0FmTTs7OztBQWlCQSxJQUFNSSxLQUFLLEdBQUcsU0FBUkEsS0FBUSxDQUFDQyxDQUFEO0FBQUEsU0FDbkJBLENBQUMsR0FBRyxJQUFJeEMsSUFBSixDQUFTd0MsQ0FBQyxDQUFDQyxPQUFGLEVBQVQsQ0FBSCxHQUEyQixJQURUO0FBQUEsQ0FBZDs7OztBQUdBLElBQU1DLFlBQVksR0FBRyxTQUFmQSxZQUFlLENBQzFCM0MsSUFEMEIsRUFFMUI0QyxTQUYwQixFQUl2QjtBQUFBLE1BREhDLFNBQ0csdUVBRGtCLEtBQ2xCOztBQUNILE1BQUk3QyxJQUFJLEtBQUssSUFBVCxJQUFpQjRDLFNBQVMsQ0FBQyxDQUFELENBQVQsS0FBaUIsSUFBbEMsSUFBMENBLFNBQVMsQ0FBQyxDQUFELENBQVQsS0FBaUIsSUFBL0QsRUFBcUU7QUFDbkUsV0FBTyxLQUFQO0FBQ0Q7O0FBRUQsTUFBTWxCLEdBQUcsR0FBR2MsS0FBSyxDQUFDeEMsSUFBRCxDQUFqQjtBQUNBLE1BQU04QyxLQUFLLEdBQUdOLEtBQUssQ0FBQ0ksU0FBUyxDQUFDLENBQUQsQ0FBVixDQUFuQjtBQUNBLE1BQU1HLEdBQUcsR0FBR1AsS0FBSyxDQUFDSSxTQUFTLENBQUMsQ0FBRCxDQUFWLENBQWpCOztBQUVBLE1BQUlsQixHQUFKLEVBQVM7QUFDUEEsSUFBQUEsR0FBRyxDQUFDc0IsUUFBSixDQUFhLENBQWIsRUFBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsRUFBc0IsQ0FBdEI7QUFDRDs7QUFDRCxNQUFJRixLQUFKLEVBQVc7QUFDVEEsSUFBQUEsS0FBSyxDQUFDRSxRQUFOLENBQWUsQ0FBZixFQUFrQixDQUFsQixFQUFxQixDQUFyQixFQUF3QixDQUF4QjtBQUNEOztBQUNELE1BQUlELEdBQUosRUFBUztBQUNQQSxJQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYSxDQUFiLEVBQWdCLENBQWhCLEVBQW1CLENBQW5CLEVBQXNCLENBQXRCO0FBQ0Q7O0FBRUQsU0FBT0YsS0FBSyxJQUFJcEIsR0FBVCxJQUFnQnFCLEdBQWhCLEdBQ0hELEtBQUssSUFBSXBCLEdBQVQsSUFDRUEsR0FBRyxJQUFJcUIsR0FEVCxLQUVHLENBQUNGLFNBQUQsSUFBZSxDQUFDbkMsVUFBVSxDQUFDb0MsS0FBRCxFQUFRcEIsR0FBUixDQUFYLElBQTJCLENBQUNoQixVQUFVLENBQUNnQixHQUFELEVBQU1xQixHQUFOLENBRnhELENBREcsR0FJSCxJQUpKO0FBS0QsQ0E1Qk0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRlVXRpbHMgfSBmcm9tIFwiZGF5LXBpY2tlci1yZWFjdFwiXG5cbmV4cG9ydCBjb25zdCBNT05USFMgPSBbXG4gIFwiMeaciFwiLFxuICBcIjLmnIhcIixcbiAgXCIz5pyIXCIsXG4gIFwiNOaciFwiLFxuICBcIjXmnIhcIixcbiAgXCI25pyIXCIsXG4gIFwiN+aciFwiLFxuICBcIjjmnIhcIixcbiAgXCI55pyIXCIsXG4gIFwiMTDmnIhcIixcbiAgXCIxMeaciFwiLFxuICBcIjEy5pyIXCIsXG5dXG5leHBvcnQgY29uc3QgV0VFS0RBWVNfTE9ORyA9IFtcbiAgXCLlkajml6VcIixcbiAgXCLlkajkuIBcIixcbiAgXCLlkajkuoxcIixcbiAgXCLlkajkuIlcIixcbiAgXCLlkajlm5tcIixcbiAgXCLlkajkupRcIixcbiAgXCLlkajlha1cIixcbl1cbmV4cG9ydCBjb25zdCBXRUVLREFZU19TSE9SVCA9IFtcIuaXpVwiLCBcIuS4gFwiLCBcIuS6jFwiLCBcIuS4iVwiLCBcIuWbm1wiLCBcIuS6lFwiLCBcIuWFrVwiXVxuXG5leHBvcnQgY29uc3QgTU9OVEhTX0VOID0gW1xuICBcIkphbnVhcnlcIixcbiAgXCJGZWJydWFyeVwiLFxuICBcIk1hcmNoXCIsXG4gIFwiQXByaWxcIixcbiAgXCJNYXlcIixcbiAgXCJKdW5lXCIsXG4gIFwiSnVseVwiLFxuICBcIkF1Z3VzdFwiLFxuICBcIlNlcHRlbWJlclwiLFxuICBcIk9jdG9iZXJcIixcbiAgXCJOb3ZlbWJlclwiLFxuICBcIkRlY2VtYmVyXCIsXG5dXG5leHBvcnQgY29uc3QgV0VFS0RBWVNfTE9OR19FTiA9IFtcbiAgXCJTdW5kYXlcIixcbiAgXCJNb25kYXlcIixcbiAgXCJUdWVzZGF5XCIsXG4gIFwiV2VkbmVzZGF5XCIsXG4gIFwiVGh1cnNkYXlcIixcbiAgXCJGcmlkYXlcIixcbiAgXCJTYXR1cmRheVwiLFxuXVxuZXhwb3J0IGNvbnN0IFdFRUtEQVlTX1NIT1JUX0VOID0gW1wiU3VcIiwgXCJNb1wiLCBcIlR1XCIsIFwiV2VcIiwgXCJUaFwiLCBcIkZyXCIsIFwiU2FcIl1cblxuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRNYXhEYXRlID0gKCkgPT4ge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICBkYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSlcbiAgZGF0ZS5zZXRNb250aCgxMSwgMzEpXG4gIHJldHVybiBkYXRlXG59XG5cbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0TWluRGF0ZSA9ICgpID0+IHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcbiAgZGF0ZS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkgLSA0KVxuICBkYXRlLnNldE1vbnRoKDAsIDEpXG4gIHJldHVybiBkYXRlXG59XG5cbmV4cG9ydCBjb25zdCBhcmVTYW1lTW9udGggPSAoZGF0ZTE/OiBEYXRlIHwgbnVsbCwgZGF0ZTI/OiBEYXRlIHwgbnVsbCkgPT5cbiAgZGF0ZTEgIT0gbnVsbCAmJlxuICBkYXRlMiAhPSBudWxsICYmXG4gIGRhdGUxLmdldE1vbnRoKCkgPT09IGRhdGUyLmdldE1vbnRoKCkgJiZcbiAgZGF0ZTEuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZTIuZ2V0RnVsbFllYXIoKVxuXG5leHBvcnQgY29uc3QgYXJlU2FtZURheSA9IChkYXRlMTogRGF0ZSwgZGF0ZTI6IERhdGUpID0+XG4gIGFyZVNhbWVNb250aChkYXRlMSwgZGF0ZTIpICYmIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpXG5cbmV4cG9ydCBjb25zdCBpc0xlZ2FsRGF0ZVN0cmluZyA9IChkYXRlOiBzdHJpbmcpID0+IHtcbiAgaWYgKGRhdGUudHJpbSgpID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICBjb25zdCBzdHJpbmdzID0gZGF0ZS5zcGxpdChcIi1cIilcbiAgaWYgKFxuICAgIHN0cmluZ3MubGVuZ3RoID09PSAzICYmXG4gICAgc3RyaW5nc1swXS5sZW5ndGggPT09IDQgJiZcbiAgICBzdHJpbmdzWzFdLmxlbmd0aCA9PT0gMiAmJlxuICAgIHN0cmluZ3NbMl0ubGVuZ3RoID09PSAyICYmXG4gICAgIWlzTmFOKE51bWJlcihzdHJpbmdzWzBdKSkgJiZcbiAgICAhaXNOYU4oTnVtYmVyKHN0cmluZ3NbMV0pKSAmJlxuICAgICFpc05hTihOdW1iZXIoc3RyaW5nc1syXSkpXG4gICkge1xuICAgIGNvbnN0IGNoZWNrTGVhcFllYXIgPSAoc3RyOiBudW1iZXIpID0+XG4gICAgICAoc3RyICUgNCA9PT0gMCAmJiBzdHIgJSAxMDAgIT09IDApIHx8IHN0ciAlIDQwMCA9PT0gMFxuICAgIGNvbnN0IHNvbGFyID0gWzEsIDMsIDUsIDcsIDgsIDEwLCAxMl1cbiAgICBjb25zdCBsdW5hciA9IFs0LCA2LCA5LCAxMV1cbiAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQoc3RyaW5nc1swXSwgMTApXG4gICAgY29uc3QgbW9udGggPSBwYXJzZUludChzdHJpbmdzWzFdLCAxMClcbiAgICBjb25zdCBkYXkgPSBwYXJzZUludChzdHJpbmdzWzJdLCAxMClcbiAgICBpZiAobW9udGggPiAwICYmIG1vbnRoIDwgMTMpIHtcbiAgICAgIGlmIChzb2xhci5pbmNsdWRlcyhtb250aCkpIHtcbiAgICAgICAgaWYgKGRheSA+IDAgJiYgZGF5IDwgMzIpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGx1bmFyLmluY2x1ZGVzKG1vbnRoKSkge1xuICAgICAgICBpZiAoZGF5ID4gMCAmJiBkYXkgPCAzMSkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjaGVja0xlYXBZZWFyKHllYXIpICYmIGRheSA+IDAgJiYgZGF5IDwgMzApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICghY2hlY2tMZWFwWWVhcih5ZWFyKSAmJiBkYXkgPiAwICYmIGRheSA8IDI5KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGNvbnN0IGlzTGVnYWxEYXRlUmFuZ2VTdHJpbmcgPSAoZGF0ZTogc3RyaW5nKSA9PiB7XG4gIGlmIChkYXRlLnRyaW0oKSA9PT0gXCJcIikge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgY29uc3Qgc3RyaW5ncyA9IGRhdGUuc3BsaXQoXCIgLSBcIilcbiAgcmV0dXJuIChcbiAgICBzdHJpbmdzLmxlbmd0aCA9PT0gMiAmJlxuICAgIHN0cmluZ3NbMF0ubGVuZ3RoICYmXG4gICAgc3RyaW5nc1sxXS5sZW5ndGggJiZcbiAgICBpc0xlZ2FsRGF0ZVN0cmluZyhzdHJpbmdzWzBdKSAmJlxuICAgIGlzTGVnYWxEYXRlU3RyaW5nKHN0cmluZ3NbMV0pXG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IGNvbnZlcnREYXRlVG9TdHJpbmcgPSAoZGF0ZT86IERhdGUgfCBcIlwiIHwgbnVsbCkgPT4ge1xuICBpZiAoIWRhdGUpIHtcbiAgICByZXR1cm4gXCJcIlxuICB9XG4gIGNvbnN0IGRhdGVTdHJpbmcgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhcInpoLUhhbnMtQ05cIilcbiAgY29uc3Qgc3RyaW5ncyA9IGRhdGVTdHJpbmcuc3BsaXQoXCIvXCIpXG4gIGNvbnN0IGFkZFplcm8gPSAoczogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHBhcnNlSW50KHMsIDEwKSA8IDEwKSB7XG4gICAgICByZXR1cm4gYDAke3N9YFxuICAgIH1cbiAgICByZXR1cm4gc1xuICB9XG4gIHJldHVybiBgJHtzdHJpbmdzWzBdfS0ke2FkZFplcm8oc3RyaW5nc1sxXSl9LSR7YWRkWmVybyhzdHJpbmdzWzJdKX1gXG59XG5cbmV4cG9ydCBjb25zdCBjb252ZXJ0RGF0ZVJhbmdlVG9TdHJpbmcgPSAoXG4gIHJhbmdlPzogW0RhdGUgfCB1bmRlZmluZWQgfCBudWxsLCBEYXRlIHwgdW5kZWZpbmVkIHwgbnVsbF1cbikgPT4ge1xuICBpZiAoIXJhbmdlKSB7XG4gICAgcmV0dXJuIFwiXCJcbiAgfVxuICBjb25zdCBmcm9tID0gcmFuZ2VbMF1cbiAgY29uc3QgdG8gPSByYW5nZVsxXVxuICBpZiAoIShmcm9tICYmIHRvKSkge1xuICAgIHJldHVybiBcIlwiXG4gIH1cbiAgaWYgKERhdGVVdGlscy5pc0RheUFmdGVyKHRvLCBmcm9tKSkge1xuICAgIHJldHVybiBgJHtjb252ZXJ0RGF0ZVRvU3RyaW5nKGZyb20pfSAtICR7Y29udmVydERhdGVUb1N0cmluZyh0byl9YFxuICB9XG4gIHJldHVybiBgJHtjb252ZXJ0RGF0ZVRvU3RyaW5nKHRvKX0gLSAke2NvbnZlcnREYXRlVG9TdHJpbmcoZnJvbSl9YFxufVxuXG5leHBvcnQgY29uc3QgY2xvbmUgPSAoZDogRGF0ZSB8IG51bGwgfCB1bmRlZmluZWQpID0+XG4gIGQgPyBuZXcgRGF0ZShkLmdldFRpbWUoKSkgOiBudWxsXG5cbmV4cG9ydCBjb25zdCBpc0RheUluUmFuZ2UgPSAoXG4gIGRhdGU6IERhdGUsXG4gIGRhdGVSYW5nZTogW0RhdGUgfCBudWxsIHwgdW5kZWZpbmVkLCBEYXRlIHwgbnVsbCB8IHVuZGVmaW5lZF0sXG4gIGV4Y2x1c2l2ZTogYm9vbGVhbiA9IGZhbHNlXG4pID0+IHtcbiAgaWYgKGRhdGUgPT09IG51bGwgfHwgZGF0ZVJhbmdlWzBdID09PSBudWxsIHx8IGRhdGVSYW5nZVsxXSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgZGF5ID0gY2xvbmUoZGF0ZSlcbiAgY29uc3Qgc3RhcnQgPSBjbG9uZShkYXRlUmFuZ2VbMF0pXG4gIGNvbnN0IGVuZCA9IGNsb25lKGRhdGVSYW5nZVsxXSlcblxuICBpZiAoZGF5KSB7XG4gICAgZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApXG4gIH1cbiAgaWYgKHN0YXJ0KSB7XG4gICAgc3RhcnQuc2V0SG91cnMoMCwgMCwgMCwgMClcbiAgfVxuICBpZiAoZW5kKSB7XG4gICAgZW5kLnNldEhvdXJzKDAsIDAsIDAsIDApXG4gIH1cblxuICByZXR1cm4gc3RhcnQgJiYgZGF5ICYmIGVuZFxuICAgID8gc3RhcnQgPD0gZGF5ICYmXG4gICAgICAgIGRheSA8PSBlbmQgJiZcbiAgICAgICAgKCFleGNsdXNpdmUgfHwgKCFhcmVTYW1lRGF5KHN0YXJ0LCBkYXkpICYmICFhcmVTYW1lRGF5KGRheSwgZW5kKSkpXG4gICAgOiBudWxsXG59XG4iXX0=